<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="generator" content="Hugo 0.16-DEV" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/css/theme.css">
<link rel="stylesheet" href="/css/highlight.css">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="icon" href="/favicon-192x192.png" sizes="192x192">
<link rel="apple-touch-icon" href="/favicon-192x192.png" sizes="192x192">
<title>matplotlib &#43; seaborn: Pythonでグラフ描画 - Watal M. Iwasaki</title>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$']],
    displayMath: [['$$','$$']],
    processEnvironments: false,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  }
});
MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for(i = 0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.classList.add('has-jax');
  }
});
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML"></script>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-41178626-2', 'auto');
ga('send', 'pageview');
</script>
</head>
<body><div id="container">
<header><h1><a href="/">
<img class="logo" src="/favicon-192x192.png" alt="航">
Watal M. Iwasaki
</a></h1>
</header>

<main>
<article>
<header><h1><a href="">
matplotlib &#43; seaborn — Pythonでグラフ描画
</a></h1>
<ul id="tags">
<li><a href="/tags/python">python</a></li>
<li><a href="/tags/graph">graph</a></li>
</ul>
</header>



<p><a href="http://matplotlib.org/">http://matplotlib.org/</a></p>

<p>行列を含む数値計算やグラフ描画を行うためのソフトウェアとしては
有償の <a href="http://www.mathworks.com/products/matlab/">MATLAB</a> が広く利用されているが、
Python にいくつかのモジュールを導入することで
同等かそれ以上のことを無料で実現することができる。</p>

<ul>
<li><code>numpy</code>: 配列演算や基本的な数学関数</li>
<li><code>scipy</code>: 高度な科学技術計算</li>
<li><code>matplotlib</code>: グラフ描画</li>
<li><code>ipython</code>: 高機能なシェル環境</li>
<li><code>pylab</code>: これらを組み合わせてMATLABっぽいインターフェイスにする(不要)</li>
</ul>

<p>直接 <code>matplotlib</code> を触るのは大変なので、
<code>seaborn</code> というラッパーを介して使う。
ただし <code>matplotlib</code> を全く知らずに <code>seaborn</code> を使うのは無理っぽい。
<a href="/rstats/ggplot2.html">ggplot2</a> は <code>grid</code> を知らなくても使えるのに。。。</p>

<h2 id="基本">基本</h2>

<ul>
<li><a href="http://matplotlib.org/faq/usage_faq.html">http://matplotlib.org/faq/usage_faq.html</a></li>
<li><a href="http://matplotlib.org/users/pyplot_tutorial.html">http://matplotlib.org/users/pyplot_tutorial.html</a></li>
</ul>

<!-- -->

<pre><code>import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns

iris = sns.load_dataset('iris')

fig, ax = plt.subplots(figsize=(7, 7))
sns.regplot('sepal_width', 'sepal_length', data=iris, ax=ax)

plt.show()  # opens a window
fig.savefig('example.png')
</code></pre>

<ul>
<li><a href="http://matplotlib.org/faq/howto_faq.html">http://matplotlib.org/faq/howto_faq.html</a></li>
<li><a href="http://www.scipy-lectures.org/intro/matplotlib/matplotlib.html">http://www.scipy-lectures.org/intro/matplotlib/matplotlib.html</a></li>
</ul>

<h3 id="figure-axes">Figure, Axes</h3>

<p><a href="http://matplotlib.org/faq/usage_faq.html#general-concepts">http://matplotlib.org/faq/usage_faq.html#general-concepts</a></p>

<p><a href="http://matplotlib.org/api/figure_api.html">http://matplotlib.org/api/figure_api.html</a></p>

<p><a href="http://matplotlib.org/api/axes_api.html">http://matplotlib.org/api/axes_api.html</a></p>

<h2 id="style">Style</h2>

<p><a href="http://stanford.edu/~mwaskom/software/seaborn/tutorial/aesthetics.html">http://stanford.edu/~mwaskom/software/seaborn/tutorial/aesthetics.html</a></p>

<p>背景色や補助線などの設定。</p>

<p><code>sns.set_style(style, rc=None)</code></p>

<dl>
<dt><code>style</code>:</dt>
<dd>{<code>darkgrid</code>, <code>whitegrid</code>, <code>dark</code>, <code>white</code>, <code>ticks</code>}</dd>
<dt><code>rc</code>:</dt>
<dd>see below</dd>
</dl>

<pre><code class="language-python">&gt;&gt;&gt; sns.axes_style(style='darkgrid', rc=None)
{'axes.axisbelow': True,
 'axes.edgecolor': 'white',
 'axes.facecolor': '#EAEAF2',
 'axes.grid': True,
 'axes.labelcolor': '.15',
 'axes.linewidth': 0,
 'figure.facecolor': 'white',
 'font.family': ['sans-serif'],
 'font.sans-serif': ['Arial',
                     'Liberation Sans',
                     'Bitstream Vera Sans',
                     'sans-serif'],
 'grid.color': 'white',
 'grid.linestyle': '-',
 'image.cmap': 'Greys',
 'legend.frameon': False,
 'legend.numpoints': 1,
 'legend.scatterpoints': 1,
 'lines.solid_capstyle': 'round',
 'text.color': '.15',
 'xtick.color': '.15',
 'xtick.direction': 'out',
 'xtick.major.size': 0,
 'xtick.minor.size': 0,
 'ytick.color': '.15',
 'ytick.direction': 'out',
 'ytick.major.size': 0,
 'ytick.minor.size': 0}
</code></pre>

<p><code>with</code> 文でも使える:</p>

<pre><code>with sns.axes_style('white'):
    # plot
</code></pre>

<dl>
<dt><code>sns.despine(fig=None, ax=None, top=True, right=True, left=False, bottom=False, offset=None, trim=False)</code></dt>
<dd>指定した枠線を消す。
生の <code>matplotlib</code> だと <code>ax.spines['top'].set_visible(False)</code></dd>
</dl>

<h2 id="context">Context</h2>

<p><a href="http://stanford.edu/~mwaskom/software/seaborn/tutorial/aesthetics.html#scaling-plot-elements-with-plotting-context-and-set-context">http://stanford.edu/~mwaskom/software/seaborn/tutorial/aesthetics.html#scaling-plot-elements-with-plotting-context-and-set-context</a></p>

<p>ラベルや点・線などのスケール調整。</p>

<p><code>sns.set_context(context, font_scale=1, rc=None)</code></p>

<dl>
<dt><code>context</code></dt>
<dd>{<code>notebook</code>: 1.0, <code>paper</code>: 0.8, <code>talk</code>, 1.3, <code>poster</code>, 1.6}</dd>
<dt><code>rc</code>:</dt>
<dd>see below</dd>
</dl>

<pre><code class="language-python">&gt;&gt;&gt; sns.plotting_context(context='notebook', font_scale=1, rc=None)
{'axes.labelsize': 11,
 'axes.titlesize': 12,
 'figure.figsize': array([ 8. ,  5.5]),
 'grid.linewidth': 1,
 'legend.fontsize': 10,
 'lines.linewidth': 1.75,
 'lines.markeredgewidth': 0,
 'lines.markersize': 7,
 'patch.linewidth': 0.3,
 'xtick.labelsize': 10,
 'xtick.major.pad': 7,
 'xtick.major.width': 1,
 'xtick.minor.width': 0.5,
 'ytick.labelsize': 10,
 'ytick.major.pad': 7,
 'ytick.major.width': 1,
 'ytick.minor.width': 0.5}
</code></pre>

<p><code>with</code> 文でも使える:</p>

<pre><code>with sns.plotting_context('talk', font_scale=1.2):
    # plot
</code></pre>

<h2 id="color">Color</h2>

<p><a href="http://stanford.edu/~mwaskom/software/seaborn/tutorial/color_palettes.html">http://stanford.edu/~mwaskom/software/seaborn/tutorial/color_palettes.html</a></p>

<p>個々の描画関数の <code>palette</code> や <code>cmap</code> に指定するか、
<code>with sns.color_palette():</code> のブロック内で描画するか、
<code>sns.set_palette()</code> でデフォルトを指定する。</p>

<ul>
<li><p><a href="http://colorbrewer2.org/">ColorBrewer</a> の名前で指定。
e.g., <code>sns.color_palette('RdBu', n_colors=7)</code></p>

<p><code>_r</code> をつけると逆に、<code>_d</code> をつけると暗めになる。</p></li>

<li><p><a href="http://xkcd.com/color/rgb/">xkcd</a> の名前リストを
<code>sns.xkcd_palette()</code> に渡す</p></li>

<li><p><code>cubehelix_palette()</code> はgrayscaleでもいい感じで印刷できる</p></li>

<li><p>自分で作る:
<code>sns.hls_palette()</code>, <code>sns.husl_palette()</code>,
<code>sns.light_palette()</code>, <code>sns.dark_palette()</code>,
<code>sns.diverging_palette()</code></p></li>
</ul>

<h2 id="text-annotation-legend">Text, Annotation, Legend</h2>

<p><a href="http://matplotlib.org/users/text_intro.html">http://matplotlib.org/users/text_intro.html</a></p>

<p><a href="http://matplotlib.org/users/annotations_guide.html">http://matplotlib.org/users/annotations_guide.html</a></p>

<p><a href="http://matplotlib.org/users/legend_guide.html">http://matplotlib.org/users/legend_guide.html</a></p>

<h2 id="plot">Plot</h2>

<ul>
<li><a href="http://stanford.edu/~mwaskom/software/seaborn/tutorial/regression.html">http://stanford.edu/~mwaskom/software/seaborn/tutorial/regression.html</a></li>
<li><a href="http://stanford.edu/~mwaskom/software/seaborn/tutorial/distributions.html">http://stanford.edu/~mwaskom/software/seaborn/tutorial/distributions.html</a></li>
<li><a href="http://stanford.edu/~mwaskom/software/seaborn/tutorial/categorical.html">http://stanford.edu/~mwaskom/software/seaborn/tutorial/categorical.html</a></li>
<li><a href="http://stanford.edu/~mwaskom/software/seaborn/examples/index.html">http://stanford.edu/~mwaskom/software/seaborn/examples/index.html</a></li>
<li><a href="http://matplotlib.org/users/screenshots.html">http://matplotlib.org/users/screenshots.html</a></li>
</ul>

<h3 id="axes-level-plot">Axes-level plot</h3>

<p><code>ax</code> を受け取ってそこに描画して <code>ax</code> を返す。</p>

<dl>
<dt><code>sns.regplot(x, y, data, ..., fit_reg=True, ci=95, ..., ax)</code></dt>
<dd>散布図。<code>fit_reg=False</code> しないと勝手に回帰線が引かれる。</dd>
<dt><code>sns.distplot(a, bins, hist=True, kde=True, rug=False, fit=None, ..., ax)</code></dt>
<dd>ヒストグラム、カーネル密度推定、ラグプロットなど分布全般</dd>
<dt><code>sns.boxplot(x, y, hue, data, order, ..., ax)</code></dt>
<dd>箱ひげ図</dd>
<dt><code>sns.violinplot(x, y, hue, data, order, ..., ax)</code></dt>
<dd>バイオリンプロット</dd>
<dt><code>sns.stripplot(x, y, hue, data, order, ..., ax)</code></dt>
<dd>片軸がカテゴリカル変数の散布図</dd>
<dt><code>sns.pointplot(x, y, hue, data, order, ..., ax)</code></dt>
<dd>平均値の折れ線グラフ + エラーバー</dd>
<dt><code>sns.barplot(x, y, hue, data, order, ..., ax)</code></dt>
<dd>平均値の棒グラフ + エラーバー</dd>
<dt><code>sns.countplot(x, y, hue, data, order, ..., ax)</code></dt>
<dd>カテゴリカル変数の頻度棒グラフ</dd>
<dt><code>sns.heatmap(data, vmin, vmax, cmap, center, ..., square, mask, ax)</code></dt>
<dd>ヒートマップ</dd>
</dl>

<h3 id="figure-level-plot">Figure-level plot</h3>

<p>Grid に Axes-level plot を乗せて返す高レベル関数。</p>

<dl>
<dt><code>sns.lmplot(x, y, data, hue, col, row, ...)</code></dt>
<dd><code>regplot()</code> + <code>FacetGrid()</code></dd>
<dt><code>sns.jointplot(x, y, data, kind, stat_func, ...)</code></dt>
<dd>散布図 + 周辺ヒストグラム with <code>JointGrid()</code>.<br />
<code>kind</code>: {<code>scatter</code>, <code>reg</code>, <code>resid</code>, <code>kde</code>, <code>hex</code>}</dd>
<dt><code>sns.pairplot(data, hue, hue_order, palette, vars, x_vars, y_vars, kind, diag_kind, ...)</code></dt>
<dd>ペアワイズ散布図 with <code>PairGrid()</code></dd>
<dt><code>sns.clustermap(data, ...)</code></dt>
<dd><code>heatmap()</code> + <code>ClusterGrid()</code></dd>
<dt><code>sns.factorplot(x, y, hue, data, row, col, ..., kind, ...)</code></dt>
<dd>カテゴリカル変数全般.<br />
<code>kind</code>: {<code>point</code>, <code>bar</code>, <code>count</code>, <code>box</code>, <code>violin</code>, <code>strip</code>}</dd>
</dl>

<h2 id="grid">Grid</h2>

<p><a href="http://stanford.edu/~mwaskom/software/seaborn/tutorial/axis_grids.html">http://stanford.edu/~mwaskom/software/seaborn/tutorial/axis_grids.html</a></p>

<p><code>sns.FacetGrid(data, row, col, hue, col_wrap, sharex, sharey, ...)</code></p>

<blockquote>
<p>カテゴリカル変数でプロットを分ける:</p>

<pre><code>grid = sns.FacetGrid(iris, col='species', col_wrap=2)
grid.map(sns.regplot, 'sepal_width', 'sepal_length')
</code></pre>

<p>色分けもこれの仕事:</p>

<pre><code>grid = sns.FacetGrid(iris, hue='species')
grid.map(sns.regplot, 'sepal_width', 'sepal_length')
</code></pre>
</blockquote>

<p><code>sns.PairGrid(data, ..., vars, x_vars, y_vars, ...)</code></p>

<blockquote>
<p>ペアワイズ散布図 + ヒストグラム:</p>

<pre><code>grid = sns.PairGrid(iris)
grid = grid.map_diag(sns.distplot)
grid = grid.map_offdiag(sns.regplot)
</code></pre>
</blockquote>

<p><code>sns.JointGrid(x, y, data, ...)</code></p>

<blockquote>
<p>散布図 + 周辺分布:</p>

<pre><code>grid = sns.JointGrid('sepal_width', 'sepal_length', iris)
grid = grid.plot_joint(sns.regplot)
grid = grid.plot_marginals(sns.distplot, kde=False)
</code></pre>
</blockquote>

<hr />

<p><a href="http://matplotlib.org/users/gridspec.html">http://matplotlib.org/users/gridspec.html</a></p>

<p><a href="http://matplotlib.org/users/tight_layout_guide.html">http://matplotlib.org/users/tight_layout_guide.html</a></p>

<p>データに関係なく複数の図を並べる。</p>

<p><code>plt.subplots(nrows, ncols, sharex, sharey, ...)</code></p>

<blockquote>
<p>等サイズに分割:</p>

<pre><code>fig, axes = plt.subplots(2, 2)
sns.regplot('x', 'y', d, ax=axes[0, 0])
fig.tight_layout()
</code></pre>
</blockquote>

<p><code>sns.gridspec.GridSpec(nrows, ncols, ...)</code></p>

<blockquote>
<p>e.g., 2x2分割して &ldquo;品&rdquo; みたいな配置にする:</p>

<pre><code>gs = sns.gridspec.GridSpec(2, 2)
ax_top = plt.subplot(gs[0, :])
ax_bottom_l = plt.subplot(gs[1, 0])
ax_bottom_r = plt.subplot(gs[1, 1])
</code></pre>
</blockquote>

<p><code>sns.gridspec,GridSpecFromSubplotSpec(nrows, ncols, subplot_spec, ...)</code></p>

<blockquote>
<p>入れ子で分割。
e.g., 左右に分け、それぞれをさらに3段に分ける:</p>

<pre><code>gs = sns.gridspec.GridSpec(1, 2)
gsl = sns.gridspec.GridSpecFromSubplotSpec(3, 1, gs[0])
gsr = sns.gridspec.GridSpecFromSubplotSpec(3, 1, gs[1])
ax_ltop = plt.subplot(gsl[0])
</code></pre>
</blockquote>

<h2 id="その他">その他</h2>

<h3 id="インストール">インストール</h3>

<p><a href="http://matplotlib.org/faq/installing_faq.html">http://matplotlib.org/faq/installing_faq.html</a></p>

<p><a href="/python/pip.html">pip</a> 一発でいけるはず:</p>

<pre><code>% pip install numpy scipy pandas
% pip install matplotlib seaborn
</code></pre>

<h3 id="設定">設定</h3>

<p><a href="http://matplotlib.org/users/customizing.html">http://matplotlib.org/users/customizing.html</a></p>

<p><a href="http://matplotlib.org/faq/troubleshooting_faq.html">http://matplotlib.org/faq/troubleshooting_faq.html</a></p>

<p><a href="http://matplotlib.org/faq/environment_variables_faq.html">http://matplotlib.org/faq/environment_variables_faq.html</a></p>

<p><code>$HOME/.matplotlib/matplotlibrc</code> が読まれる。</p>

<p><code>site-packages/matplotlib/mpl-data/matplotlibrc</code> にテンプレートがある。</p>

<h3 id="キャッシュ問題">キャッシュ問題</h3>

<p>使用するPythonを変更すると以下のようなランタイムエラーが出ることがある:</p>

<pre><code>RuntimeError: Could not open facefile /Library/Python/2.6/site-packages/matplotlib/mpl-data/fonts/ttf/Vera.ttf; Cannot_Open_Resource
</code></pre>

<p>そういうときはキャッシュを削除してみるとよい:</p>

<pre><code>% rm -rf ~/.matplotlib/fontList.cache
</code></pre>

<h3 id="バックエンド問題">バックエンド問題</h3>

<p>Macで非Frameworkとしてインストールした自前Pythonを使うと怒られる:</p>

<pre><code>RuntimeError: Python is not installed as a framework. The Mac OS X backend will not be able to function correctly if Python is not installed as a framework. See the Python documentation for more information on installing Python as a framework on Mac OS X. Please either reinstall Python as a framework, or try one of the other backends.
</code></pre>

<p><code>~/.matplotlib/matplotlibrc</code>
でバックエンドを <code>MacOSX</code> 以外に変更すればとりあえずOK:</p>

<pre><code>backend: TkAgg
</code></pre>

<p><a href="http://qiita.com/katryo/items/918667f28301fdec89ba">http://qiita.com/katryo/items/918667f28301fdec89ba</a></p>

<p><a href="http://matplotlib.org/faq/usage_faq.html#what-is-a-backend">http://matplotlib.org/faq/usage_faq.html#what-is-a-backend</a></p>

<h3 id="ラッパー">ラッパー</h3>

<ul>
<li><code>seaborn</code>: <a href="http://stanford.edu/~mwaskom/software/seaborn/">http://stanford.edu/~mwaskom/software/seaborn/</a></li>
<li>easyplot: <a href="https://github.com/HamsterHuey/easyplot">https://github.com/HamsterHuey/easyplot</a></li>
<li>prettyplotlib: <a href="http://blog.olgabotvinnik.com/prettyplotlib/">http://blog.olgabotvinnik.com/prettyplotlib/</a></li>
<li>uglyplotlib: <a href="https://gitlab.com/padawanphysicist/uglyplotlib">https://gitlab.com/padawanphysicist/uglyplotlib</a></li>
</ul>

<h2 id="書籍">書籍</h2>

<p><a rel="nofollow" href="http://www.amazon.co.jp/gp/product/4873116554/ref=as_li_ss_il?ie=UTF8&camp=247&creative=7399&creativeASIN=4873116554&linkCode=as2&tag=heavywatal-22"><img border="0" src="http://ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=4873116554&Format=_SL250_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=heavywatal-22" ></a><img src="http://ir-jp.amazon-adsystem.com/e/ir?t=heavywatal-22&l=as2&o=9&a=4873116554" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />
<a rel="nofollow" href="http://www.amazon.co.jp/gp/product/4873117356/ref=as_li_ss_il?ie=UTF8&camp=247&creative=7399&creativeASIN=4873117356&linkCode=as2&tag=heavywatal-22"><img border="0" src="http://ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=4873117356&Format=_SL250_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=heavywatal-22" ></a><img src="http://ir-jp.amazon-adsystem.com/e/ir?t=heavywatal-22&l=as2&o=9&a=4873117356" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /></p>

</article>
</main>

<nav id="menu">

<div ><a href="/cv.html">Curriculum Vitae</a></div>


<div ><a href="/research.html">Research Interests</a></div>


<input type="checkbox" id="R stats">
<label for="R stats">R stats</label>
<ul>
<li><a href="/rstats/bioconductor.html">Bioconductor</a></li>
<li><a href="/rstats/biomart.html">biomaRt</a></li>
<li><a href="/rstats/devtools.html">devtools</a></li>
<li><a href="/rstats/dplyr.html">dplyr</a></li>
<li><a href="/rstats/edger.html">edgeR</a></li>
<li><a href="/rstats/ggbio.html">ggbio</a></li>
<li><a href="/rstats/ggplot2.html">ggplot2</a></li>
<li><a href="/rstats/plyr.html">plyr</a></li>
<li><a href="/rstats/readr.html">readr</a></li>
<li><a href="/rstats/reshape2.html">reshape2</a></li>
<li><a href="/rstats/rgl.html">rgl</a></li>
<li><a href="/rstats/rjags.html">rjags</a></li>
<li><a href="/rstats/rtracklayer.html">rtracklayer</a></li>
<li><a href="/rstats/stringr.html">stringr</a></li>
<li><a href="/rstats/tidyr.html">tidyr</a></li>
<li><a href="/rstats/topgo.html">topGO</a></li>
<li><a href="/rstats/programming.html">プログラミングTips</a></li>
<li><a href="/rstats/config.html">環境設定</a></li>
<li><a href="/rstats/intro.html">自学自習のための基礎知識</a></li>
</ul>

<input type="checkbox" id="Python" checked>
<label for="Python" class="active">Python</label>
<ul>
<li><a href="/python/biopython.html">BioPython</a></li>
<li><a href="/python/egglib.html">EggLib</a></li>
<li><a href="/python/ipython.html">IPython</a></li>
<li><a href="/python/install.html">Installation</a></li>
<li><a href="/python/scipy.html">NumPy, SciPy</a></li>
<li><a href="/python/pyqt.html">PyQt</a></li>
<li><a href="/python/copy.html">copy</a></li>
<li class="active"><a href="/python/matplotlib.html">matplotlib &#43; seaborn</a></li>
<li><a href="/python/pip.html">pip</a></li>
<li><a href="/python/rpy2.html">rpy2</a></li>
</ul>

<input type="checkbox" id="C&#43;&#43;">
<label for="C&#43;&#43;">C&#43;&#43;</label>
<ul>
<li><a href="/cxx/boost.html">Boost</a></li>
<li><a href="/cxx/getopt.html">C&#43;&#43; コマンドライン引数の取得</a></li>
<li><a href="/cxx/clang.html">clang / llvm</a></li>
<li><a href="/cxx/gcc.html">gcc</a></li>
<li><a href="/cxx/speed.html">めざせC&#43;&#43;高速プログラム</a></li>
<li><a href="/cxx/random.html">擬似乱数生成器</a></li>
</ul>

<input type="checkbox" id="Biology">
<label for="Biology">Biology</label>
<ul>
<li><a href="/bio/blast.html">BLAST</a></li>
<li><a href="/bio/dnasp.html">DnaSP</a></li>
<li><a href="/bio/emboss.html">EMBOSS</a></li>
<li><a href="/bio/ensembl.html">Ensembl</a></li>
<li><a href="/bio/gene_ontology.html">Gene Ontology</a></li>
<li><a href="/bio/meme.html">MEME</a></li>
<li><a href="/bio/mrbayes.html">MrBayes</a></li>
<li><a href="/bio/paml.html">PAML</a></li>
<li><a href="/bio/popgen.html">Population Genetics</a></li>
<li><a href="/bio/repeatmasker.html">RepeatMasker</a></li>
<li><a href="/bio/samtools.html">SAMtools</a></li>
<li><a href="/bio/stochastic_process.html">Stochastic Process</a></li>
<li><a href="/bio/dadi.html">dadi</a></li>
<li><a href="/bio/linear_algebra.html">線形代数</a></li>
<li><a href="/bio/complexnetwork.html">複雑ネットワーク</a></li>
<li><a href="/bio/nig.html">遺伝研スパコン</a></li>
<li><a href="/bio/motif.html">配列モチーフ探索</a></li>
</ul>

<input type="checkbox" id="Developer Tools">
<label for="Developer Tools">Developer Tools</label>
<ul>
<li><a href="/dev/etc.html">/etc</a></li>
<li><a href="/dev/emacs.html">Emacs</a></li>
<li><a href="/dev/mercurial.html">Mercurial</a></li>
<li><a href="/dev/mysql.html">MySQL</a></li>
<li><a href="/dev/qt.html">Qt</a></li>
<li><a href="/dev/sh.html">Shell Script</a></li>
<li><a href="/dev/torque.html">TORQUE</a></li>
<li><a href="/dev/tex.html">TeX</a></li>
<li><a href="/dev/autotools.html">autoconf, automake</a></li>
<li><a href="/dev/make.html">make</a></li>
<li><a href="/dev/mount.html">mount</a></li>
<li><a href="/dev/nano.html">nano</a></li>
<li><a href="/dev/rsync.html">rsync</a></li>
<li><a href="/dev/ssh.html">ssh</a></li>
<li><a href="/dev/sshfs.html">sshfs</a></li>
<li><a href="/dev/tmux.html">tmux</a></li>
<li><a href="/dev/zsh.html">zsh</a></li>
<li><a href="/dev/nohup.html">プロセス管理</a></li>
<li><a href="/dev/devenv.html">開発環境</a></li>
</ul>

<input type="checkbox" id="Linux">
<label for="Linux">Linux</label>
<ul>
<li><a href="/linux/centos.html">CentOS 6.5</a></li>
<li><a href="/linux/japanese.html">Linux日本語環境</a></li>
<li><a href="/linux/apt.html">apt/dpkg</a></li>
<li><a href="/linux/ufw.html">ufw</a></li>
</ul>

<input type="checkbox" id="Mac">
<label for="Mac">Mac</label>
<ul>
<li><a href="/mac/applescript.html">AppleScript</a></li>
<li><a href="/mac/homebrew.html">Homebrew</a></li>
<li><a href="/mac/keyboard.html">Keyboard</a></li>
<li><a href="/mac/command.html">Mac Command</a></li>
<li><a href="/mac/macports.html">MacPorts</a></li>
<li><a href="/mac/quicklook.html">QuickLook</a></li>
<li><a href="/mac/spotlight.html">Spotlight</a></li>
<li><a href="/mac/winebottler.html">WineBottler</a></li>
<li><a href="/mac/kotoeri.html">ことえり</a></li>
</ul>

<input type="checkbox" id="Lectures">
<label for="Lectures">Lectures</label>
<ul>
<li><a href="/lectures/verhoef_comm_ecol-11.html">Community Ecology 輪読会 11章</a></li>
<li><a href="/lectures/prml-11-1.html">PRML輪読会 11章1節</a></li>
<li><a href="/lectures/prml-2-1.html">PRML輪読会 2章前半</a></li>
<li><a href="/lectures/prml-3-4.html">PRML輪読会 3章4節</a></li>
<li><a href="/lectures/wakeley-2-2.html">Wakeley輪読会 2章2節</a></li>
</ul>

<input type="checkbox" id="Miscellaneous">
<label for="Miscellaneous">Miscellaneous</label>
<ul>
<li><a href="/misc/fonts.html">Fonts</a></li>
<li><a href="/misc/mailman.html">Mailman</a></li>
<li><a href="/misc/vnc.html">VNCによる画面共有</a></li>
<li><a href="/misc/virtualbox.html">VirtualBox</a></li>
</ul>
</nav>


<aside>
<h1><label for="inputsource">Page source</label></h1>
<input type="checkbox" id="inputsource">
<pre id="pagesource"><code class="language-markdown">
+++
title = "matplotlib &#43; seaborn"
+++

&lt;http://matplotlib.org/&gt;

行列を含む数値計算やグラフ描画を行うためのソフトウェアとしては
有償の [MATLAB](http://www.mathworks.com/products/matlab/) が広く利用されているが、
Python にいくつかのモジュールを導入することで
同等かそれ以上のことを無料で実現することができる。

-   `numpy`: 配列演算や基本的な数学関数
-   `scipy`: 高度な科学技術計算
-   `matplotlib`: グラフ描画
-   `ipython`: 高機能なシェル環境
-   `pylab`: これらを組み合わせてMATLABっぽいインターフェイスにする(不要)

直接 `matplotlib` を触るのは大変なので、
`seaborn` というラッパーを介して使う。
ただし `matplotlib` を全く知らずに `seaborn` を使うのは無理っぽい。
[ggplot2]({#{#HUGOSHORTCODE-1#}#}) は `grid` を知らなくても使えるのに。。。

## 基本

-   &lt;http://matplotlib.org/faq/usage_faq.html&gt;
-   &lt;http://matplotlib.org/users/pyplot_tutorial.html&gt;

&lt;!-- --&gt;

    import numpy as np
    import pandas as pd
    import matplotlib.pyplot as plt
    import seaborn as sns

    iris = sns.load_dataset(&#39;iris&#39;)

    fig, ax = plt.subplots(figsize=(7, 7))
    sns.regplot(&#39;sepal_width&#39;, &#39;sepal_length&#39;, data=iris, ax=ax)

    plt.show()  # opens a window
    fig.savefig(&#39;example.png&#39;)

-   &lt;http://matplotlib.org/faq/howto_faq.html&gt;
-   &lt;http://www.scipy-lectures.org/intro/matplotlib/matplotlib.html&gt;

### Figure, Axes

&lt;http://matplotlib.org/faq/usage_faq.html#general-concepts&gt;

&lt;http://matplotlib.org/api/figure_api.html&gt;

&lt;http://matplotlib.org/api/axes_api.html&gt;

## Style

&lt;http://stanford.edu/~mwaskom/software/seaborn/tutorial/aesthetics.html&gt;

背景色や補助線などの設定。

`sns.set_style(style, rc=None)`

`style`:
:   {`darkgrid`, `whitegrid`, `dark`, `white`, `ticks`}

`rc`:
:   see below

```python
&gt;&gt;&gt; sns.axes_style(style=&#39;darkgrid&#39;, rc=None)
{&#39;axes.axisbelow&#39;: True,
 &#39;axes.edgecolor&#39;: &#39;white&#39;,
 &#39;axes.facecolor&#39;: &#39;#EAEAF2&#39;,
 &#39;axes.grid&#39;: True,
 &#39;axes.labelcolor&#39;: &#39;.15&#39;,
 &#39;axes.linewidth&#39;: 0,
 &#39;figure.facecolor&#39;: &#39;white&#39;,
 &#39;font.family&#39;: [&#39;sans-serif&#39;],
 &#39;font.sans-serif&#39;: [&#39;Arial&#39;,
                     &#39;Liberation Sans&#39;,
                     &#39;Bitstream Vera Sans&#39;,
                     &#39;sans-serif&#39;],
 &#39;grid.color&#39;: &#39;white&#39;,
 &#39;grid.linestyle&#39;: &#39;-&#39;,
 &#39;image.cmap&#39;: &#39;Greys&#39;,
 &#39;legend.frameon&#39;: False,
 &#39;legend.numpoints&#39;: 1,
 &#39;legend.scatterpoints&#39;: 1,
 &#39;lines.solid_capstyle&#39;: &#39;round&#39;,
 &#39;text.color&#39;: &#39;.15&#39;,
 &#39;xtick.color&#39;: &#39;.15&#39;,
 &#39;xtick.direction&#39;: &#39;out&#39;,
 &#39;xtick.major.size&#39;: 0,
 &#39;xtick.minor.size&#39;: 0,
 &#39;ytick.color&#39;: &#39;.15&#39;,
 &#39;ytick.direction&#39;: &#39;out&#39;,
 &#39;ytick.major.size&#39;: 0,
 &#39;ytick.minor.size&#39;: 0}
```

`with` 文でも使える:

    with sns.axes_style(&#39;white&#39;):
        # plot

`sns.despine(fig=None, ax=None, top=True, right=True, left=False, bottom=False, offset=None, trim=False)`
:   指定した枠線を消す。
    生の `matplotlib` だと `ax.spines[&#39;top&#39;].set_visible(False)`

## Context

&lt;http://stanford.edu/~mwaskom/software/seaborn/tutorial/aesthetics.html#scaling-plot-elements-with-plotting-context-and-set-context&gt;

ラベルや点・線などのスケール調整。

`sns.set_context(context, font_scale=1, rc=None)`

`context`
:   {`notebook`: 1.0, `paper`: 0.8, `talk`, 1.3, `poster`, 1.6}

`rc`:
:   see below

```python
&gt;&gt;&gt; sns.plotting_context(context=&#39;notebook&#39;, font_scale=1, rc=None)
{&#39;axes.labelsize&#39;: 11,
 &#39;axes.titlesize&#39;: 12,
 &#39;figure.figsize&#39;: array([ 8. ,  5.5]),
 &#39;grid.linewidth&#39;: 1,
 &#39;legend.fontsize&#39;: 10,
 &#39;lines.linewidth&#39;: 1.75,
 &#39;lines.markeredgewidth&#39;: 0,
 &#39;lines.markersize&#39;: 7,
 &#39;patch.linewidth&#39;: 0.3,
 &#39;xtick.labelsize&#39;: 10,
 &#39;xtick.major.pad&#39;: 7,
 &#39;xtick.major.width&#39;: 1,
 &#39;xtick.minor.width&#39;: 0.5,
 &#39;ytick.labelsize&#39;: 10,
 &#39;ytick.major.pad&#39;: 7,
 &#39;ytick.major.width&#39;: 1,
 &#39;ytick.minor.width&#39;: 0.5}
```

`with` 文でも使える:

    with sns.plotting_context(&#39;talk&#39;, font_scale=1.2):
        # plot

## Color

&lt;http://stanford.edu/~mwaskom/software/seaborn/tutorial/color_palettes.html&gt;

個々の描画関数の `palette` や `cmap` に指定するか、
`with sns.color_palette():` のブロック内で描画するか、
`sns.set_palette()` でデフォルトを指定する。

-   [ColorBrewer](http://colorbrewer2.org/) の名前で指定。
    e.g., `sns.color_palette(&#39;RdBu&#39;, n_colors=7)`

    `_r` をつけると逆に、`_d` をつけると暗めになる。

-   [xkcd](http://xkcd.com/color/rgb/) の名前リストを
    `sns.xkcd_palette()` に渡す
-   `cubehelix_palette()` はgrayscaleでもいい感じで印刷できる
-   自分で作る:
    `sns.hls_palette()`, `sns.husl_palette()`,
    `sns.light_palette()`, `sns.dark_palette()`,
    `sns.diverging_palette()`

## Text, Annotation, Legend

&lt;http://matplotlib.org/users/text_intro.html&gt;

&lt;http://matplotlib.org/users/annotations_guide.html&gt;

&lt;http://matplotlib.org/users/legend_guide.html&gt;

## Plot

-   &lt;http://stanford.edu/~mwaskom/software/seaborn/tutorial/regression.html&gt;
-   &lt;http://stanford.edu/~mwaskom/software/seaborn/tutorial/distributions.html&gt;
-   &lt;http://stanford.edu/~mwaskom/software/seaborn/tutorial/categorical.html&gt;
-   &lt;http://stanford.edu/~mwaskom/software/seaborn/examples/index.html&gt;
-   &lt;http://matplotlib.org/users/screenshots.html&gt;

### Axes-level plot

`ax` を受け取ってそこに描画して `ax` を返す。

`sns.regplot(x, y, data, ..., fit_reg=True, ci=95, ..., ax)`
:   散布図。`fit_reg=False` しないと勝手に回帰線が引かれる。

`sns.distplot(a, bins, hist=True, kde=True, rug=False, fit=None, ..., ax)`
:   ヒストグラム、カーネル密度推定、ラグプロットなど分布全般

`sns.boxplot(x, y, hue, data, order, ..., ax)`
:   箱ひげ図

`sns.violinplot(x, y, hue, data, order, ..., ax)`
:   バイオリンプロット

`sns.stripplot(x, y, hue, data, order, ..., ax)`
:   片軸がカテゴリカル変数の散布図

`sns.pointplot(x, y, hue, data, order, ..., ax)`
:   平均値の折れ線グラフ &#43; エラーバー

`sns.barplot(x, y, hue, data, order, ..., ax)`
:   平均値の棒グラフ &#43; エラーバー

`sns.countplot(x, y, hue, data, order, ..., ax)`
:   カテゴリカル変数の頻度棒グラフ

`sns.heatmap(data, vmin, vmax, cmap, center, ..., square, mask, ax)`
:   ヒートマップ

### Figure-level plot

Grid に Axes-level plot を乗せて返す高レベル関数。

`sns.lmplot(x, y, data, hue, col, row, ...)`
:   `regplot()` &#43; `FacetGrid()`

`sns.jointplot(x, y, data, kind, stat_func, ...)`
:   散布図 &#43; 周辺ヒストグラム with `JointGrid()`.\
    `kind`: {`scatter`, `reg`, `resid`, `kde`, `hex`}

`sns.pairplot(data, hue, hue_order, palette, vars, x_vars, y_vars, kind, diag_kind, ...)`
:   ペアワイズ散布図 with `PairGrid()`

`sns.clustermap(data, ...)`
:   `heatmap()` &#43; `ClusterGrid()`

`sns.factorplot(x, y, hue, data, row, col, ..., kind, ...)`
:   カテゴリカル変数全般.\
    `kind`: {`point`, `bar`, `count`, `box`, `violin`, `strip`}

## Grid

&lt;http://stanford.edu/~mwaskom/software/seaborn/tutorial/axis_grids.html&gt;

`sns.FacetGrid(data, row, col, hue, col_wrap, sharex, sharey, ...)`

&gt; カテゴリカル変数でプロットを分ける:
&gt;
&gt;     grid = sns.FacetGrid(iris, col=&#39;species&#39;, col_wrap=2)
&gt;     grid.map(sns.regplot, &#39;sepal_width&#39;, &#39;sepal_length&#39;)
&gt;
&gt; 色分けもこれの仕事:
&gt;
&gt;     grid = sns.FacetGrid(iris, hue=&#39;species&#39;)
&gt;     grid.map(sns.regplot, &#39;sepal_width&#39;, &#39;sepal_length&#39;)

`sns.PairGrid(data, ..., vars, x_vars, y_vars, ...)`

&gt; ペアワイズ散布図 &#43; ヒストグラム:
&gt;
&gt;     grid = sns.PairGrid(iris)
&gt;     grid = grid.map_diag(sns.distplot)
&gt;     grid = grid.map_offdiag(sns.regplot)

`sns.JointGrid(x, y, data, ...)`

&gt; 散布図 &#43; 周辺分布:
&gt;
&gt;     grid = sns.JointGrid(&#39;sepal_width&#39;, &#39;sepal_length&#39;, iris)
&gt;     grid = grid.plot_joint(sns.regplot)
&gt;     grid = grid.plot_marginals(sns.distplot, kde=False)

------------------------------------------------------------------------

&lt;http://matplotlib.org/users/gridspec.html&gt;

&lt;http://matplotlib.org/users/tight_layout_guide.html&gt;

データに関係なく複数の図を並べる。

`plt.subplots(nrows, ncols, sharex, sharey, ...)`

&gt; 等サイズに分割:
&gt;
&gt;     fig, axes = plt.subplots(2, 2)
&gt;     sns.regplot(&#39;x&#39;, &#39;y&#39;, d, ax=axes[0, 0])
&gt;     fig.tight_layout()

`sns.gridspec.GridSpec(nrows, ncols, ...)`

&gt; e.g., 2x2分割して &#34;品&#34; みたいな配置にする:
&gt;
&gt;     gs = sns.gridspec.GridSpec(2, 2)
&gt;     ax_top = plt.subplot(gs[0, :])
&gt;     ax_bottom_l = plt.subplot(gs[1, 0])
&gt;     ax_bottom_r = plt.subplot(gs[1, 1])

`sns.gridspec,GridSpecFromSubplotSpec(nrows, ncols, subplot_spec, ...)`

&gt; 入れ子で分割。
&gt; e.g., 左右に分け、それぞれをさらに3段に分ける:
&gt;
&gt;     gs = sns.gridspec.GridSpec(1, 2)
&gt;     gsl = sns.gridspec.GridSpecFromSubplotSpec(3, 1, gs[0])
&gt;     gsr = sns.gridspec.GridSpecFromSubplotSpec(3, 1, gs[1])
&gt;     ax_ltop = plt.subplot(gsl[0])

## その他

### インストール

&lt;http://matplotlib.org/faq/installing_faq.html&gt;

[pip]({#{#HUGOSHORTCODE-2#}#}) 一発でいけるはず:

    % pip install numpy scipy pandas
    % pip install matplotlib seaborn

### 設定

&lt;http://matplotlib.org/users/customizing.html&gt;

&lt;http://matplotlib.org/faq/troubleshooting_faq.html&gt;

&lt;http://matplotlib.org/faq/environment_variables_faq.html&gt;

`$HOME/.matplotlib/matplotlibrc` が読まれる。

`site-packages/matplotlib/mpl-data/matplotlibrc` にテンプレートがある。

### キャッシュ問題

使用するPythonを変更すると以下のようなランタイムエラーが出ることがある:

    RuntimeError: Could not open facefile /Library/Python/2.6/site-packages/matplotlib/mpl-data/fonts/ttf/Vera.ttf; Cannot_Open_Resource

そういうときはキャッシュを削除してみるとよい:

    % rm -rf ~/.matplotlib/fontList.cache

### バックエンド問題

Macで非Frameworkとしてインストールした自前Pythonを使うと怒られる:

    RuntimeError: Python is not installed as a framework. The Mac OS X backend will not be able to function correctly if Python is not installed as a framework. See the Python documentation for more information on installing Python as a framework on Mac OS X. Please either reinstall Python as a framework, or try one of the other backends.

`~/.matplotlib/matplotlibrc`
でバックエンドを `MacOSX` 以外に変更すればとりあえずOK:

    backend: TkAgg

&lt;http://qiita.com/katryo/items/918667f28301fdec89ba&gt;

&lt;http://matplotlib.org/faq/usage_faq.html#what-is-a-backend&gt;

### ラッパー

-   `seaborn`: &lt;http://stanford.edu/~mwaskom/software/seaborn/&gt;
-   easyplot: &lt;https://github.com/HamsterHuey/easyplot&gt;
-   prettyplotlib: &lt;http://blog.olgabotvinnik.com/prettyplotlib/&gt;
-   uglyplotlib: &lt;https://gitlab.com/padawanphysicist/uglyplotlib&gt;

## 書籍

&lt;a rel=&#34;nofollow&#34; href=&#34;http://www.amazon.co.jp/gp/product/4873116554/ref=as_li_ss_il?ie=UTF8&amp;camp=247&amp;creative=7399&amp;creativeASIN=4873116554&amp;linkCode=as2&amp;tag=heavywatal-22&#34;&gt;&lt;img border=&#34;0&#34; src=&#34;http://ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=4873116554&amp;Format=_SL250_&amp;ID=AsinImage&amp;MarketPlace=JP&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=heavywatal-22&#34; &gt;&lt;/a&gt;&lt;img src=&#34;http://ir-jp.amazon-adsystem.com/e/ir?t=heavywatal-22&amp;l=as2&amp;o=9&amp;a=4873116554&#34; width=&#34;1&#34; height=&#34;1&#34; border=&#34;0&#34; alt=&#34;&#34; style=&#34;border:none !important; margin:0px !important;&#34; /&gt;
&lt;a rel=&#34;nofollow&#34; href=&#34;http://www.amazon.co.jp/gp/product/4873117356/ref=as_li_ss_il?ie=UTF8&amp;camp=247&amp;creative=7399&amp;creativeASIN=4873117356&amp;linkCode=as2&amp;tag=heavywatal-22&#34;&gt;&lt;img border=&#34;0&#34; src=&#34;http://ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=4873117356&amp;Format=_SL250_&amp;ID=AsinImage&amp;MarketPlace=JP&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=heavywatal-22&#34; &gt;&lt;/a&gt;&lt;img src=&#34;http://ir-jp.amazon-adsystem.com/e/ir?t=heavywatal-22&amp;l=as2&amp;o=9&amp;a=4873117356&#34; width=&#34;1&#34; height=&#34;1&#34; border=&#34;0&#34; alt=&#34;&#34; style=&#34;border:none !important; margin:0px !important;&#34; /&gt;

</code></pre>
</aside>

<footer>(ɔ) 2008 Watal M. Iwasaki</footer>
</div>

<script src="/js/highlight.pack.js"></script>
<script>
hljs.configure({languages: ["sh","c++","python","r","tex"]});
hljs.initHighlightingOnLoad();
</script>
</body>
</html>


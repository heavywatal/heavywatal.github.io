<!doctype html>
<html lang="ja">
<head prefix="og: http://ogp.me/ns#">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
<title>devtools: Rパッケージ作成支援 - Heavy Watal</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/theme.css">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#e08010">
<meta name="theme-color" content="#e08010">
<meta name="author" content="Watal M. Iwasaki">
<meta property="og:title" content="devtools: Rパッケージ作成支援">
<meta property="og:type" content="article">
<meta property="og:url" content="https://heavywatal.github.io/rstats/devtools.html">
<meta property="og:image" content="https://avatars.githubusercontent.com/heavywatal">
<meta property="og:description" content="">
<meta property="og:site_name" content="Heavy Watal">

<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@heavywatal">
<meta name="twitter:creator" content="@heavywatal">

<meta name="generator" content="Hugo 0.32-DEV" />
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  showProcessingMessages: false,
  messageStyle: "none",
  displayAlign: "left",
  displayIndent: "2em",
  tex2jax: {
    inlineMath: [['$','$']],
    displayMath: [['\\[', '\\]']]
  }
});
</script>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS_CHTML"></script>

<script type="application/ld+json">{
"@context": "http://schema.org",
"@type": "BreadcrumbList",
"itemListElement": [
 {"@type": "ListItem",
  "position": 1,
  "item": {
   "@id": "https://heavywatal.github.io/rstats.html",
   "name": "rstats"}},
 {"@type": "ListItem",
  "position": 2,
  "item": {
   "@id": "https://heavywatal.github.io/rstats/devtools.html",
   "name": "devtools"}}
]}</script>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-41178626-2', 'auto');
ga('send', 'pageview');
</script>

</head>
<body>
<header><h1><a href="/">
<img class="logo" src="/heavywatal.svg" alt="岩嵜航">
Heavy Watal
</a></h1>
<form class="cse-search-box" action="/search.html">
<label><i class="fa fa-fw fa-search"></i><input type="text" name="q" aria-label="cse-search-box" required></label>
</form>
</header>

<main>
<article>
<header><h1><a href="/rstats/devtools.html">
devtools — Rパッケージ作成支援
</a></h1>
<ul class="tags">
<li><a href="/tags/r.html">r</a></li>
<li><a href="/tags/tidyverse.html">tidyverse</a></li>
<li><a href="/tags/package.html">package</a></li>
</ul>
</header>



<p>自分で書いた関数が多くなってきたら、まとめてパッケージを作るとよい。
少しだけ面倒だが、以下のようなメリットがある。</p>

<ul>
<li>普通に変数や関数を定義するとワークスペースが名前でいっぱいになってしまうが、
パッケージ内で定義されている変数や関数は <code>ls()</code> で出てこないのでスッキリ</li>
<li>既存のオブジェクトと名前が衝突するような場合でも、
<code>mypackage::func1</code> のように名前空間を明示的に指定して呼び出せる</li>
</ul>

<p>CRANに上げる程ではないとしても、
GitHubに公開しておけば誰でも使えるようになるので、
共同研究者と解析環境を共有したり、
ひとつの論文のワークフローを置いておいたり、いろいろ使い道はある。</p>

<h2 id="rパッケージ">Rパッケージ</h2>

<ul>
<li><a href="http://r-pkgs.had.co.nz/">http://r-pkgs.had.co.nz/</a></li>
<li><a href="http://www.masalmon.eu/2017/12/11/goodrpackages/">How to develop good R packages (for open science)</a></li>
</ul>

<h3 id="最低限の作成手順">最低限の作成手順</h3>

<ol>
<li><p>Rを起動して <code>devtools</code> をインストールする</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r">install.packages<span class="p">(</span><span class="s">&#39;devtools&#39;</span><span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>devtools<span class="p">)</span></code></pre></div></li>

<li><p><code>devtools::create()</code> で骨組みを作る</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="kp">setwd</span><span class="p">(</span><span class="s">&#39;~/tmp/&#39;</span><span class="p">)</span>
pkgname <span class="o">=</span> <span class="s">&#39;namaespace&#39;</span>
title_desc <span class="o">=</span> <span class="s">&#39;Utility to create dummy R packages for namespace&#39;</span>
github_repo <span class="o">=</span> <span class="kp">sprintf</span><span class="p">(</span><span class="s">&#39;https://github.com/heavywatal/%s&#39;</span><span class="p">,</span> pkgname<span class="p">)</span>
devtools<span class="o">::</span>create<span class="p">(</span>pkgname<span class="p">,</span> description<span class="o">=</span><span class="kt">list</span><span class="p">(</span>
    Package<span class="o">=</span>pkgname<span class="p">,</span>
    Title<span class="o">=</span>title_desc<span class="p">,</span>
    Description<span class="o">=</span><span class="kp">paste0</span><span class="p">(</span>title_desc<span class="p">,</span> <span class="s">&#39;.&#39;</span><span class="p">),</span>
    <span class="sb">`Authors@R`</span><span class="o">=</span><span class="s">&#34;person(&#39;Watal M.&#39;, &#39;Iwasaki&#39;, email=&#39;user@example.com&#39;, role=c(&#39;aut&#39;, &#39;cre&#39;))&#34;</span><span class="p">,</span>
    License<span class="o">=</span><span class="s">&#39;MIT&#39;</span><span class="p">,</span>
    Suggests<span class="o">=</span><span class="s">&#39;tidyverse&#39;</span><span class="p">,</span>
    Imports<span class="o">=</span><span class="s">&#39;devtools, stringr&#39;</span><span class="p">,</span>
    URL<span class="o">=</span>github_repo<span class="p">,</span>
    BugReports<span class="o">=</span><span class="kp">paste0</span><span class="p">(</span>github_repo<span class="p">,</span> <span class="s">&#39;/issues&#39;</span><span class="p">))</span></code></pre></div></li>

<li><p><code>devtools::check(pkgname)</code> で様子を見てみる</p>

<div class="note">
<p>LaTeX 関連で怒られたら足りないパッケージを入れる:
<code>sudo tlmgr install inconsolata helvetic</code></p>

</div>
</li>

<li><p>GitHubに空のリポジトリを作る</p>

<ul>
<li>パッケージと同名でなくてもよい</li>
<li><code>README</code> や <code>LICENSE</code> は後から作る</li>
</ul></li>

<li><p>コミットしてプッシュ</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">% git init
% git add --all
% git commit -m <span class="s2">&#34;first commit&#34;</span>
% git remote add origin git@github.com:heavywatal/namaespace.git
% git push -u origin master</code></pre></div></li>

<li><p>とりあえず誰でもインストール可能なパッケージができたはず</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r">install_github<span class="p">(</span><span class="s">&#39;heavywatal/namaespace&#39;</span><span class="p">)</span></code></pre></div></li>

<li><p>あとは <code>R/</code> にソースコードを置いたり <code>README.md</code> を書いたり</p></li>
</ol>

<h3 id="構造">構造</h3>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">DESCRIPTION  <span class="c1"># 一番大事
</span><span class="c1"></span>NAMESPACE    <span class="c1"># 見せるオブジェクトを列挙
</span><span class="c1"></span>README.md    <span class="c1"># 全体の説明を簡単に
</span><span class="c1"></span>R/           <span class="c1"># Rソースコード
</span><span class="c1"></span>data/        <span class="c1"># サンプルデータなど
</span><span class="c1"></span>exec/        <span class="c1"># 実行ファイル
</span><span class="c1"></span>inst/        <span class="c1"># CITATION
</span><span class="c1"></span>man/         <span class="c1"># ヘルプファイル.Rd
</span><span class="c1"></span>src/         <span class="c1"># C++ソースコード
</span><span class="c1"></span>tests/
vignettes/</code></pre></div>
<h3 id="description-http-r-pkgs-had-co-nz-description-html"><a href="http://r-pkgs.had.co.nz/description.html"><code>DESCRIPTION</code></a></h3>

<ul>
<li>どうでも良さそうなファイル名とは裏腹に、ちゃんと書かないと動かない</li>
<li>始めは <code>devtools::create()</code> で自動生成し、それから他のパッケージを参考にしつつ修正していく</li>
<li><code>Imports</code> に列挙したものは依存パッケージとして同時にインストールされる。
しかし <code>library()</code> 時に同時に読み込まれるわけではない。</li>
<li><code>Title</code> はピリオドを含まず、 <code>Description</code> はピリオドを含むようにする</li>
<li>ライセンスを別ファイルにする場合は <code>License: file LICENSE</code> と書く</li>
<li><code>Authors@R</code> のとこは後でRで評価されるので変な形</li>
</ul>

<h3 id="namespace-http-r-pkgs-had-co-nz-namespace-html"><a href="http://r-pkgs.had.co.nz/namespace.html"><code>NAMESPACE</code></a></h3>

<ul>
<li><code>roxygen2</code> (下記) がソースコードから自動生成するので<strong>直接触らない</strong></li>
<li>ここで <code>export()</code> された関数だけがユーザーから見える</li>
<li>ここで <code>import()</code> された関数はパッケージ内でattachされた状態になるが、
そうしないで毎回 <code>名前空間::</code> 越しにアクセスしたほうがよい。
<code>magrittr::%&gt;%</code> のような演算子は仕方がないので
<code>importFrom()</code> で個別指定する。</li>
</ul>

<h3 id="r-ソースコード-http-r-pkgs-had-co-nz-r-html"><a href="http://r-pkgs.had.co.nz/r.html"><code>R/</code> ソースコード</a></h3>

<ul>
<li><code>NAMESPACE</code> や <code>man/*.Rd</code> を自動生成してもらえるように
<a href="#roxygen2">後述のroxygen</a>形式でコメントを書く</li>
<li>ファイルの数や名前は何でもいいので、開発者が分かりやすいようにしとく。
例えば、似たような関数をひとつのファイルにまとめ、
同名の<code>@rdname</code>を指定して<code>man/</code>と同じ構造にするとか。</li>
<li><code>library()</code> や <code>require()</code> を書かない。
必要なパッケージは <code>DESCRIPTION</code> の <code>Imports</code> に書き、
<code>名前空間::関数()</code> のようにして使う。
どうしても名前空間を省略したいものだけ <code>@importFrom</code> を指定する。</li>
<li>パッケージ読み込み時などに実行される特殊関数
<code>.onLoad(...)</code>, <code>.onAttach(...)</code>, <code>.onUnload(...)</code>
は慣習的に<code>zzz.R</code>というファイルに記述する。</li>
</ul>

<h3 id="src-c-ソースコード-http-r-pkgs-had-co-nz-src-html"><a href="http://r-pkgs.had.co.nz/src.html"><code>src/</code> C++ソースコード</a></h3>

<ul>
<li><a href="https://cran.r-project.org/web/packages/Rcpp">Rcpp</a>
が型変換などをスムーズにしてくれる。</li>

<li><p><code>Rcpp.h</code>のインクルードといくつかのコメントが必要</p>
<div class="highlight"><pre class="chroma"><code class="language-c++" data-lang="c++"><span class="c1">// [[Rcpp::plugins(cpp14)]]
</span><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Rcpp.h&gt;</span><span class="cp">
</span><span class="cp"></span>
<span class="c1">//&#39; First example
</span><span class="c1">//&#39; @param args string vector
</span><span class="c1">//&#39; @return string
</span><span class="c1">//&#39; @export
</span><span class="c1">// [[Rcpp::export]]
</span><span class="c1"></span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">cxx_func</span><span class="p">(</span><span class="n">Rcpp</span><span class="o">::</span><span class="n">CharacterVector</span> <span class="n">args</span><span class="o">=</span><span class="n">Rcpp</span><span class="o">::</span><span class="n">CharacterVector</span><span class="o">::</span><span class="n">create</span><span class="p">())</span> <span class="p">{</span>
    <span class="k">auto</span> <span class="n">vs_args</span> <span class="o">=</span> <span class="n">Rcpp</span><span class="o">::</span><span class="n">as</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="n">args</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">vs_args</span><span class="p">;</span>
<span class="p">}</span></code></pre></div></li>

<li><p>開発者側で指定すべきビルドオプションは <code>src/Makevars</code> に指定</p>

<pre><code>CXX_STD = CXX14
PKG_CPPFLAGS = -DSTRICT_R_HEADERS
PKG_LIBS = -lmy_great_lib
</code></pre>

<p><code>STRICT_R_HEADERS</code> を定義しておくことで余計なマクロ定義を防げる</p></li>

<li><p>ユーザ側で指定すべきオプションは <code>~/.R/Makevars</code> に</p>

<pre><code>CFLAGS = -g -Wall -O2 -march=native -mtune=native
CXXFLAGS = $(CFLAGS)
CXX11FLAGS = $(CXXFLAGS)
CXX14FLAGS = $(CXXFLAGS)
CXX17FLAGS = $(CXXFLAGS)
CPPFLAGS = -I${HOME}/local/include -I${HOME}/.linuxbrew/include
LDFLAGS = -L${HOME}/local/lib -L${HOME}/.linuxbrew/lib
</code></pre></li>

<li><p><code>DESCRIPTION</code> にいくらか書き足す</p>

<pre><code>LinkingTo: Rcpp
SystemRequirements: C++14
</code></pre></li>

<li><p><code>@docType package</code> のブロックに <code>@useDynLib</code> でパッケージ名を指定する</p>
<div class="highlight"><pre class="chroma"><code class="language-R" data-lang="R"><span class="c1">#&#39; @docType package</span>
<span class="c1">#&#39; @useDynLib namaespace</span>
<span class="kc">NULL</span></code></pre></div></li>
</ul>

<p>その他の注意点</p>

<ul>
<li><code>std::abort()</code> や <code>std::exit()</code> は呼び出したRセッションまで殺してしまう。
例外は投げっぱなしで拾わなくても大丈夫で、
<code>std::exception</code>の派生クラスなら<code>what()</code>まで表示してもらえる。</li>
</ul>

<h3 id="vignettes-http-r-pkgs-had-co-nz-vignettes-html"><a href="http://r-pkgs.had.co.nz/vignettes.html"><code>vignettes/</code></a></h3>

<p>個々の関数の使用例はRソースファイルの <code>@examples</code> に書くとして、
複数の関数を組み合わせてどう使うかとか、
パッケージ全体の使い方とかを説明するのが<code>vignettes/</code>の役割。
Rmarkdown形式で書いてHTMLやPDFで表示できるので表現力豊か。</p>

<p><code>build()</code>や<code>check()</code>がデフォルトで<code>vignette=TRUE</code>かつ処理がやや重いので、
毎回その重さを受け入れるか、わざわざ<code>FALSE</code>指定するかというのは悩みどころ。</p>

<p><code>pandoc</code> と <code>pandoc-citeproc</code> が必要なので
<a href="/mac/homebrew.html">Homebrew</a> とかでインストールしておく。</p>

<h3 id="inst-http-r-pkgs-had-co-nz-inst-html"><a href="http://r-pkgs.had.co.nz/inst.html"><code>inst/</code></a></h3>

<p>ここに入ってるものはインストール先でトップディレクトリに移される謎仕様。</p>

<p>論文で引用されることを想定している場合は <code>inst/CITATION</code> を作る。
<code>citation('ggplot2')</code> のように参照できるようになる。</p>

<h3 id="demo-http-r-pkgs-had-co-nz-misc-html"><a href="http://r-pkgs.had.co.nz/misc.html"><code>demo/</code></a></h3>

<p>vignettesに取って代わられた古い機能。
ソースコード<code>*.R</code>を置いておくと<code>demo()</code>関数で呼び出せるというだけ。</p>

<p><code>check()</code>でソースコードの中身は実行されないが、
<code>demo/00Index</code> というファイルの整合性が取れてないと警告される。
「デモの名前 + スペース3つ以上かタブ + 適当な説明」という形式。
ファイル名から拡張子を取り除いたものがデモの名前になる。</p>

<pre><code>mydemo1    Description of demo 1
mydemo2    Description of demo 2
</code></pre>

<p>人に見せたり<code>tests/</code>に入れたりするほどのもんでもないし、
毎回<code>check()</code>されなくてもいいけど、
試しに書いたコードを一応取っとく、くらいの用途にはいいかな？</p>

<h2 id="devtools"><code>devtools</code></h2>

<p><a href="https://github.com/hadley/devtools">https://github.com/hadley/devtools</a></p>

<p>骨組みを作るとこからCRANにデプロイするとこまでお世話してくれる。</p>

<h3 id="関数">関数</h3>

<dl>
<dt><code>create(path, description=getOption('devtools.desc'), check=FALSE, rstudio=TRUE)</code></dt>
<dd>まっさらな状態から骨組みを作る。
<code>path</code> が既に存在している場合は先に進めないので、
やり直すときは <code>system('rm -rf path')</code> などとして一旦消す必要がある。</dd>
<dt><code>document(pkg='.', ...)</code></dt>
<dd><code>roxygen2</code> を呼び出してソースコードから
<code>NAMESPACE</code> や <code>man/*.Rd</code> を自動生成する。</dd>
<dt><code>check(pkg='.', document=TRUE, cleanup=TRUE, cran=TRUE, check_version=FALSE, ...)</code></dt>
<dd>パッケージとしての整合性を確認。
ついでに<code>document()</code>は実行できるけど<code>spell_check()</code>はできないので手動で。</dd>
<dt><code>test(pkg='.', filter=NULL, ...)</code></dt>
<dd><code>testthat</code> を呼び出して <code>test/</code> 以下のテストコードを実行する</dd>
<dt><code>install(pkg='.', reload=TRUE, quick=FALSE, local=TRUE, ...)</code></dt>
<dd>ローカルにあるディレクトリからインストール</dd>
<dt><code>install_github(repo, username=NULL, ref='master', subdir=NULL, ...)</code></dt>
<dd>GitHubリポジトリからインストール</dd>
<dt><code>unload(pkg='.')</code></dt>
<dd><code>datach('package:XXX')</code> とか <code>unloadNamespace(XXX)</code>
よりもちゃんとまっさらにパッケージを外す。</dd>
<dt><code>load_all(pkg='.', reset=TRUE, recompile=FALSE, export_all=TRUE, quiet=FALSE)</code></dt>
<dd><code>install()</code> せずファイルから直接 <code>library()</code> する。
ロード済みでもまず <code>unload()</code> が呼ばれるので安心。</dd>
<dt><code>clean_dll(pkg='.')</code></dt>
<dd><code>src/</code> 以下に生成される <code>.o</code>, <code>.so</code> を消す。
普段は触る必要ないが、たまにこれが必要な不具合に出くわす。</dd>
</dl>

<h3 id="設定">設定</h3>

<p>項目の説明を読む</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="o">?</span>devtools</code></pre></div>
<p>例えば <code>.Rprofile</code> に</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="kp">options</span><span class="p">(</span>devtools.desc.author<span class="o">=</span><span class="s">&#39;Watal M. Iwasaki &lt;user@example.com&gt; [aut, cre]&#39;</span><span class="p">)</span>
<span class="kp">options</span><span class="p">(</span>devtools.desc.license<span class="o">=</span><span class="s">&#39;MIT&#39;</span><span class="p">)</span></code></pre></div>
<h2 id="roxygen2"><code>roxygen2</code></h2>

<p><a href="https://CRAN.R-project.org/package=roxygen2">
<img src="https://raw.githubusercontent.com/klutometis/roxygen/master/man/figures/logo.png" align="right">
</a></p>

<p>Rソースコードのコメントから<code>NAMESPACE</code>とヘルプ(<code>man/*.Rd</code>)を自動生成する。</p>

<ul>
<li><a href="http://cran.r-project.org/web/packages/roxygen2/">http://cran.r-project.org/web/packages/roxygen2/</a></li>
<li><a href="https://github.com/klutometis/roxygen">https://github.com/klutometis/roxygen</a></li>
<li><a href="http://r-pkgs.had.co.nz/man.html">http://r-pkgs.had.co.nz/man.html</a></li>
<li><a href="http://kbroman.org/pkg_primer/pages/docs.html">http://kbroman.org/pkg_primer/pages/docs.html</a></li>
<li><a href="https://cran.r-project.org/web/packages/roxygen2/vignettes/rd.html">https://cran.r-project.org/web/packages/roxygen2/vignettes/rd.html</a></li>
</ul>

<p><code>roxygen2::roxygenise(package.dir='.', ..., clean=FALSE)</code>
を直接呼んでもよいが、
基本的には <code>devtools::document()</code> を使って間接的に利用する。</p>

<h3 id="使い方">使い方</h3>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="c1">#&#39; A simple function to add 1</span>
<span class="c1">#&#39; @export</span>
<span class="c1">#&#39; @param x A numeric vector</span>
<span class="c1">#&#39; @return A numeric vector</span>
<span class="c1">#&#39; @examples</span>
<span class="c1">#&#39; increment(42)</span>
increment <span class="o">=</span> <span class="kr">function</span><span class="p">(</span>x<span class="p">)</span> <span class="p">{</span>x <span class="o">+</span> <span class="m">1</span><span class="p">}</span></code></pre></div>
<ul>
<li><code>#'</code> から始まる行がroxygenコメントとして扱われる。</li>
<li>タグは <code>@</code> で始まる。
<code>@</code> そのものを入力したいときは重ねて <code>@@</code> とする。</li>
<li>1行目には必ずタイトルを書く。
タグ <code>@title</code> は省略可能。
とりあえずコピペして全部同じタイトルにしようとすると、
関数ごとにユニークなタイトルをつけろと怒られる。</li>
<li>2段落目は <code>@description</code> 扱いされる。
省略するとタイトルが流用される。</li>
<li>空行だけでは切れ目として扱ってくれないので、
データやパッケージのドキュメントを書く場合は <code>NULL</code> を入れる。</li>
<li>dplyrなどで列名を直に指定すると
undefined global variables という警告が出るので、
どこかで <code>@importFrom rlang .data</code> した上で
<code>iris %&gt;% dplyr::filter(.data$Species == 'setosa')</code> のようにする。</li>
</ul>

<h3 id="タグ">タグ</h3>

<dl>
<dt><code>@import pkg1, pkg2, ...</code></dt>
<dd><code>NAMESPACE</code> で <code>import()</code> するパッケージを指定。
名前の衝突が怖いので基本的に使わない。</dd>
<dt><code>@importFrom pkg func</code></dt>
<dd><code>NAMESPACE</code> で <code>importFrom()</code> するパッケージを指定。
e.g., <code>@importFrom magrittr %&gt;%</code></dd>
<dt><code>@export</code></dt>
<dd><code>NAMESPACE</code> で <code>export()</code> するパッケージを指定。</dd>
<dt><code>@param arg1 description...</code></dt>
<dd>関数の引数。型や役割の説明を書く。</dd>
<dt><code>@inheritParams package::function</code></dt>
<dd>未<code>@param</code>引数の記述を別の関数から継承する。
継承の連鎖はしないので、親関数で<code>@param</code>定義されてないものはダメ。</dd>
<dt><code>@return description</code></dt>
<dd>関数の返り値。</dd>
<dt><code>@examples code...</code></dt>
<dd>例となるコードを記述する。
exportしないやつには書いてはいけない。
単数形の <code>@example</code> は外部ファイルのパスを受け取る</dd>
<dt><code>@rdname basename</code></dt>
<dd><code>man/</code>に書き出すRdファイルの名前。
複数の関数で同じものを指定すればひとつのヘルプにまとめられる。
このとき<code>@param</code>などは共有されるので、
同じ名前のものはどこかで1度だけ記述する。
逆に言えば、中身が違うものに同じ名前をつけてはいけないし、
引数や機能がほとんど重ならない関数をまとめると分かりにくくなる。</dd>
<dt><code>@docType</code></dt>
<dd>関数やクラスには不要だが <code>data</code> か <code>package</code> の場合はここで指定。</dd>
<dt><code>@name name</code></dt>
<dd>パッケージやデータはこのタグで明示的に設定する必要がある。</dd>
</dl>

<h2 id="関連書籍">関連書籍</h2>

<p><a href="https://www.amazon.co.jp/Packages-Organize-Test-Document-Share-ebook/dp/B00VAYCHL0/ref=as_li_ss_il?ie=UTF8&qid=1477817362&sr=8-1&keywords=r+package&linkCode=li3&tag=heavywatal-22&linkId=c760a9619f6d31273f668389360b687d" target="_blank"><img border="0" src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B00VAYCHL0&Format=_SL250_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=heavywatal-22" ></a><img src="https://ir-jp.amazon-adsystem.com/e/ir?t=heavywatal-22&l=li3&o=9&a=B00VAYCHL0" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />
<a href="https://www.amazon.co.jp/R%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E9%96%8B%E7%99%BA%E5%85%A5%E9%96%80-_%E3%83%86%E3%82%B9%E3%83%88%E3%80%81%E6%96%87%E6%9B%B8%E5%8C%96%E3%80%81%E3%82%B3%E3%83%BC%E3%83%89%E5%85%B1%E6%9C%89%E3%81%AE%E6%89%8B%E6%B3%95%E3%82%92%E5%AD%A6%E3%81%B6-Hadley-Wickham/dp/4873117593/ref=as_li_ss_il?ie=UTF8&qid=1477817362&sr=8-6&keywords=r+package&linkCode=li3&tag=heavywatal-22&linkId=f322b7223574d738364d6675a58a9de9" target="_blank"><img border="0" src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=4873117593&Format=_SL250_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=heavywatal-22" ></a><img src="https://ir-jp.amazon-adsystem.com/e/ir?t=heavywatal-22&l=li3&o=9&a=4873117593" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /></p>

</article>
</main>

<nav class="menu">

<div><a href="/about.html">About</a></div>


<div><a href="/research.html">Research Interests</a></div>


<input type="checkbox" id="menu-rstats" checked>
<label for="menu-rstats" class="active">R stats</label>
<ul>
<li><a href="/rstats/intro.html">R自学自習の基礎知識</a></li>
<li><a href="/rstats/programming.html">RプログラミングTips</a></li>
<li><a href="/rstats/config.html">R環境設定</a></li>
<li><a href="/rstats/ggplot2.html">ggplot2</a></li>
<li><a href="/rstats/dplyr.html">dplyr</a></li>
<li><a href="/rstats/purrr.html">purrr</a></li>
<li><a href="/rstats/tidyr.html">tidyr</a></li>
<li><a href="/rstats/readr.html">readr</a></li>
<li><a href="/rstats/stringr.html">stringr</a></li>
<li><a href="/rstats/foreach.html">foreach/parallel</a></li>
<li class="active"><a href="/rstats/devtools.html">devtools</a></li>
<li><a href="/rstats/bioconductor.html">Bioconductor</a></li>
<li><a href="/rstats/rtracklayer.html">rtracklayer</a></li>
<li><a href="/rstats/biomart.html">biomaRt</a></li>
<li><a href="/rstats/ggbio.html">ggbio</a></li>
<li><a href="/rstats/edger.html">edgeR</a></li>
<li><a href="/rstats/topgo.html">topGO</a></li>
<li><a href="/rstats/stan.html">Stan</a></li>
<li><a href="/rstats/rgl.html">rgl</a></li>
<li><a href="/rstats/plyr.html">plyr</a></li>
<li><a href="/rstats/reshape2.html">reshape2</a></li>
</ul>

<input type="checkbox" id="menu-python">
<label for="menu-python">Python</label>
<ul>
<li><a href="/python/install.html">Pythonインストール</a></li>
<li><a href="/python/pip.html">pip</a></li>
<li><a href="/python/ipython.html">IPython</a></li>
<li><a href="/python/biopython.html">BioPython</a></li>
<li><a href="/python/scipy.html">NumPy, SciPy</a></li>
<li><a href="/python/pandas.html">Pandas</a></li>
<li><a href="/python/pyqt.html">PyQt</a></li>
<li><a href="/python/concurrent.html">concurrent.futures</a></li>
<li><a href="/python/copy.html">copy</a></li>
<li><a href="/python/matplotlib.html">matplotlib &#43; seaborn</a></li>
<li><a href="/python/setuptools.html">setuptools</a></li>
</ul>

<input type="checkbox" id="menu-cxx">
<label for="menu-cxx">C&#43;&#43;</label>
<ul>
<li><a href="/cxx/boost.html">Boost</a></li>
<li><a href="/cxx/getopt.html">C&#43;&#43;コマンドライン引数</a></li>
<li><a href="/cxx/speed.html">C&#43;&#43;高速化</a></li>
<li><a href="/cxx/clang.html">clang / llvm</a></li>
<li><a href="/cxx/gcc.html">gcc</a></li>
<li><a href="/cxx/bitwise.html">ビット演算</a></li>
<li><a href="/cxx/random.html">擬似乱数生成器</a></li>
</ul>

<input type="checkbox" id="menu-bio">
<label for="menu-bio">Biology</label>
<ul>
<li><a href="/bio/blast.html">BLAST</a></li>
<li><a href="/bio/gene_ontology.html">Gene Ontology</a></li>
<li><a href="/bio/meme.html">MEME</a></li>
<li><a href="/bio/popgen.html">Population Genetics</a></li>
<li><a href="/bio/repeatmasker.html">RepeatMasker</a></li>
<li><a href="/bio/samtools.html">SAMtools</a></li>
<li><a href="/bio/stochastic_process.html">Stochastic Process</a></li>
<li><a href="/bio/dadi.html">dadi</a></li>
<li><a href="/bio/mathmorph.html">数理形態学</a></li>
<li><a href="/bio/linear_algebra.html">線形代数</a></li>
<li><a href="/bio/complexnetwork.html">複雑ネットワーク</a></li>
<li><a href="/bio/nig.html">遺伝研スパコン</a></li>
<li><a href="/bio/motif.html">配列モチーフ探索</a></li>
</ul>

<input type="checkbox" id="menu-dev">
<label for="menu-dev">Developer Tools</label>
<ul>
<li><a href="/dev/atom.html">Atom</a></li>
<li><a href="/dev/emacs.html">Emacs</a></li>
<li><a href="/dev/git.html">Git</a></li>
<li><a href="/dev/hugo.html">Hugo</a></li>
<li><a href="/dev/mercurial.html">Mercurial</a></li>
<li><a href="/dev/qt.html">Qt</a></li>
<li><a href="/dev/torque.html">TORQUE</a></li>
<li><a href="/dev/tex.html">TeX</a></li>
<li><a href="/dev/autotools.html">autoconf, automake</a></li>
<li><a href="/dev/make.html">make</a></li>
<li><a href="/dev/mount.html">mount</a></li>
<li><a href="/dev/nano.html">nano</a></li>
<li><a href="/dev/rsync.html">rsync</a></li>
<li><a href="/dev/ssh.html">ssh</a></li>
<li><a href="/dev/sshfs.html">sshfs</a></li>
<li><a href="/dev/tmux.html">tmux</a></li>
<li><a href="/dev/vi.html">vi</a></li>
<li><a href="/dev/zsh.html">zsh</a></li>
<li><a href="/dev/sh.html">シェルスクリプト</a></li>
<li><a href="/dev/nohup.html">プロセス管理</a></li>
<li><a href="/dev/devenv.html">開発環境</a></li>
</ul>

<input type="checkbox" id="menu-mac">
<label for="menu-mac">Mac</label>
<ul>
<li><a href="/mac/applescript.html">AppleScript</a></li>
<li><a href="/mac/homebrew.html">Homebrew</a></li>
<li><a href="/mac/keyboard.html">Keyboard</a></li>
<li><a href="/mac/macports.html">MacPorts</a></li>
<li><a href="/mac/command.html">Mac固有コマンド</a></li>
<li><a href="/mac/quicklook.html">QuickLook</a></li>
<li><a href="/mac/spotlight.html">Spotlight</a></li>
<li><a href="/mac/winebottler.html">WineBottler</a></li>
<li><a href="/mac/kotoeri.html">ことえり</a></li>
</ul>

<input type="checkbox" id="menu-lectures">
<label for="menu-lectures">Lectures</label>
<ul>
<li><a href="/lectures/verhoef_comm_ecol-11.html">Community Ecology 輪読会 11章</a></li>
<li><a href="/lectures/prml-11-1.html">PRML輪読会 11章1節</a></li>
<li><a href="/lectures/prml-2-1.html">PRML輪読会 2章前半</a></li>
<li><a href="/lectures/prml-3-4.html">PRML輪読会 3章4節</a></li>
<li><a href="/lectures/wakeley-2-2.html">Wakeley輪読会 2章2節</a></li>
</ul>

<input type="checkbox" id="menu-misc">
<label for="menu-misc">Miscellaneous</label>
<ul>
<li><a href="/misc/fonts.html">Fonts</a></li>
<li><a href="/misc/mailman.html">Mailman</a></li>
<li><a href="/misc/vnc.html">VNCによる画面共有</a></li>
<li><a href="/misc/virtualbox.html">VirtualBox</a></li>
</ul>

<div><a href="/tags.html">Tags</a></div>

</nav>

<footer><small>(ɔ) 2008 岩嵜航 Watal M. Iwasaki</small></footer>
</body>
</html>


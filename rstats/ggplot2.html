<!doctype html>
<html lang="ja">
<head prefix="og: http://ogp.me/ns#">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
<title>ggplot2: きれいなグラフを簡単に合理的に - Heavy Watal</title>
<link rel="stylesheet" href="/css/style.css">
<link rel="icon" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180">
<link rel="manifest" href="/manifest.webmanifest">
<meta name="theme-color" content="#eeeeee">
<meta name="author" content="Watal M. Iwasaki">
<meta property="og:title" content="ggplot2: きれいなグラフを簡単に合理的に">
<meta property="og:type" content="article">
<meta property="og:url" content="https://heavywatal.github.io/rstats/ggplot2.html">
<meta property="og:image" content="https://avatars.githubusercontent.com/heavywatal">
<meta property="og:description" content="">
<meta property="og:site_name" content="Heavy Watal">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@heavywatal">
<meta name="twitter:creator" content="@heavywatal">
<link rel="stylesheet" href="/lib/iconify.css">
<link rel="stylesheet" href="/lib/katex/katex.min.css">
<script type="module" src="/lib/katex/katex.min.js"></script>
<script type="application/ld+json">{
"@context": "http://schema.org",
"@type": "BreadcrumbList",
"itemListElement": [
 {"@type": "ListItem",
  "position": 1,
  "item": {"@id":"https://heavywatal.github.io/rstats.html","name":"rstats"} },
 {"@type": "ListItem",
  "position": 2,
  "item": {"@id":"https://heavywatal.github.io/rstats/ggplot2.html","name":"ggplot2"} }
]}</script>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-V60H2JH0G6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-V60H2JH0G6');
</script>
</head>
<body>
<header><a href="/">
<img class="logo" src="/heavywatal.svg" alt="岩嵜航">
Heavy Watal
</a>
</header>
<main>
<article>
<header><h1><a href="/rstats/ggplot2.html">
ggplot2 — きれいなグラフを簡単に合理的に
</a></h1>
<nav class="tags">
<a href="/tags/r.html">r</a>
<a href="/tags/graph.html">graph</a>
<a href="/tags/tidyverse.html">tidyverse</a>
</nav>
</header>

<a href="https://ggplot2.tidyverse.org/">
<img src="/_img/hex-stickers/ggplot2.webp" align="right" width="120" height="139">
</a>
<p>&ldquo;The <strong>G</strong>rammar of <strong>G</strong>raphics&rdquo; という体系に基づいて設計されたパッケージ。
単にいろんなグラフを「描ける」だけじゃなく「一貫性のある文法で合理的に描ける」。</p>
<p>Rのグラフ描画システムには<code>graphics</code>と<code>grid</code>の2つが存在しており、
R標準の<code>boxplot()</code>や<code>hist()</code>などは前者の上に、
本項で扱う<code>ggplot2</code>は後者の上に成り立っている。
使い方が全く異なるので、前者を知らずにいきなりggplot2から始めても大丈夫。</p>
<p><a href="https://tidyverse.tidyverse.org/">tidyverse</a> に含まれているので、
<code>install.packages(&quot;tidyverse&quot;)</code> で一括インストール、
<code>library(tidyverse)</code> で一括ロード。</p>
<ul>
<li><a href="/slides/tohoku2025r/2-visualization.html">初学者向け講義資料2025</a></li>
<li><a href="https://ggplot2.tidyverse.org">https://ggplot2.tidyverse.org</a></li>
<li><a href="https://r-graphics.org/">https://r-graphics.org/</a></li>
<li><a href="https://r4ds.hadley.nz/data-visualize.html">https://r4ds.hadley.nz/data-visualize.html</a></li>
<li><a href="https://r4ds.hadley.nz/communication.html">https://r4ds.hadley.nz/communication.html</a></li>
</ul>
<h2 id="基本的な使い方">基本的な使い方</h2>
<p>まずは手元のデータを整形して、1行が1観測、1列が1変数という形の
<a href="/rstats/programming.html#tidyverse"><strong>整然データ</strong></a>
を用意することが重要。
言い換えると「この列がx軸、この列がy軸、この列によって色を変える」というように指示できる形。
例えばggplot2に付属の <code>mpg</code> データ:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">conflicted</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">mpg</span>
</span></span><span class="line"><span class="cl"><span class="c1">#     manufacturer  model displ  year   cyl      trans   drv   cty   hwy    fl   class</span>
</span></span><span class="line"><span class="cl"><span class="c1">#            &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt;      &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#   1         audi     a4   1.8  1999     4   auto(l5)     f    18    29     p compact</span>
</span></span><span class="line"><span class="cl"><span class="c1">#   2         audi     a4   1.8  1999     4 manual(m5)     f    21    29     p compact</span>
</span></span><span class="line"><span class="cl"><span class="c1">#  --</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 233   volkswagen passat   2.8  1999     6 manual(m5)     f    18    26     p midsize</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 234   volkswagen passat   3.6  2008     6   auto(s6)     f    17    26     p midsize</span>
</span></span></code></pre></div><p>このようなデータを渡して、指示をどんどん <code>+</code> していく:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">mpg</span><span class="p">)</span> <span class="o">+</span>              <span class="c1"># mpgデータでキャンバス準備</span>
</span></span><span class="line"><span class="cl">  <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">displ</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">cty</span><span class="p">)</span> <span class="o">+</span>       <span class="c1"># displ,cty列をx,y軸にmapping</span>
</span></span><span class="line"><span class="cl">  <span class="nf">geom_point</span><span class="p">()</span> <span class="o">+</span>                  <span class="c1"># 散布図を描く</span>
</span></span><span class="line"><span class="cl">  <span class="nf">facet_wrap</span><span class="p">(</span><span class="nf">vars</span><span class="p">(</span><span class="n">drv</span><span class="p">))</span> <span class="o">+</span>         <span class="c1"># drv列に応じてパネル分割</span>
</span></span><span class="line"><span class="cl">  <span class="nf">theme_classic</span><span class="p">(</span><span class="n">base_size</span> <span class="o">=</span> <span class="m">20</span><span class="p">)</span>   <span class="c1"># クラシックなテーマで</span>
</span></span></code></pre></div><p>途中経過をオブジェクトとして取っておける:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">p1</span> <span class="o">=</span> <span class="nf">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">mpg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">p2</span> <span class="o">=</span> <span class="n">p1</span> <span class="o">+</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">displ</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">cty</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">p3</span> <span class="o">=</span> <span class="n">p2</span> <span class="o">+</span> <span class="nf">geom_point</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">p4</span> <span class="o">=</span> <span class="n">p3</span> <span class="o">+</span> <span class="nf">facet_wrap</span><span class="p">(</span><span class="nf">vars</span><span class="p">(</span><span class="n">drv</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="n">p5</span> <span class="o">=</span> <span class="n">p4</span> <span class="o">+</span> <span class="nf">theme_classic</span><span class="p">(</span><span class="n">base_size</span> <span class="o">=</span> <span class="m">20</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nf">print</span><span class="p">(</span><span class="n">p5</span><span class="p">)</span>
</span></span></code></pre></div><p>画像ファイルに保存するところまできっちり書く:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">ggsave</span><span class="p">(</span><span class="s">&#34;mpg.png&#34;</span><span class="p">,</span> <span class="n">p5</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="m">6</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="m">4</span><span class="p">,</span> <span class="n">dpi</span> <span class="o">=</span> <span class="m">300</span><span class="p">)</span>
</span></span></code></pre></div><h2 id="aesthetic-mapping">Aesthetic mapping</h2>
<p>データと見せ方を紐付ける。
<code>aes(color = Species)</code> のように <code>aes()</code> 内で列名を指定すると、
その変数に応じて色やサイズなどを変えることができる。
言い換えると、データの値を色やサイズに変換する(スケールする)ことに相当する。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="c1"># データによって点のサイズ・色・形を変える</span>
</span></span><span class="line"><span class="cl"><span class="n">p2</span> <span class="o">+</span> <span class="nf">geom_point</span><span class="p">(</span><span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span><span class="n">color</span> <span class="o">=</span> <span class="n">drv</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="n">cyl</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># aes() の外で指定するとデータによらず全体に反映。</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 常に色はオレンジ、サイズは6、不透明度は0.4</span>
</span></span><span class="line"><span class="cl"><span class="n">p2</span> <span class="o">+</span> <span class="nf">geom_point</span><span class="p">(</span><span class="n">color</span> <span class="o">=</span> <span class="s">&#34;darkorange&#34;</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="m">6</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="m">0.4</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="aestheticsまとめ">Aestheticsまとめ</h3>
<p><a href="https://ggplot2.tidyverse.org/articles/ggplot2-specs.html">https://ggplot2.tidyverse.org/articles/ggplot2-specs.html</a></p>
<ul>
<li><a href="https://ggplot2.tidyverse.org/reference/aes_colour_fill_alpha.html">色・透明度を変える</a>
<ul>
<li><code>color</code>: 点や線の色</li>
<li><code>fill</code>: 面の色</li>
<li><a href="https://ggplot2.tidyverse.org/reference/scale_alpha.html"><code>alpha</code></a>: 不透明度 (0が透明、1が不透明)</li>
</ul>
</li>
<li><a href="https://ggplot2.tidyverse.org/reference/aes_linetype_size_shape.html">大きさ・形を変える</a>
<ul>
<li><a href="https://ggplot2.tidyverse.org/reference/scale_size.html"><code>size</code></a>: 点や文字の大きさ、線の太さ</li>
<li><a href="https://ggplot2.tidyverse.org/reference/scale_shape.html"><code>shape</code></a>: 点の形</li>
<li><a href="https://ggplot2.tidyverse.org/reference/scale_linetype.html"><code>linetype</code></a>: 線の種類</li>
</ul>
</li>
<li><a href="https://ggplot2.tidyverse.org/reference/aes_group_order.html">単にグループ分けする</a>
<ul>
<li><code>group</code>: 反復試行の折れ線グラフなど、色や形はそのままで切り分けたいときに。</li>
</ul>
</li>
<li><a href="https://ggplot2.tidyverse.org/reference/aes_position.html">座標、始点、終点</a>
<ul>
<li><code>x</code>, <code>y</code>: 多くのグラフで必須項目</li>
<li><code>xmin</code>, <code>xmax</code>, <code>ymin</code>, <code>ymax</code>, <code>xend</code>, <code>yend</code>: ものによって</li>
</ul>
</li>
</ul>
<h3 id="scale_-で調整"><code>scale_*()</code> で調整</h3>
<p>変数をどうやって色やサイズに反映させるか、
各項目に対応する <code>scale_*()</code> 関数で調整する。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">p1</span> <span class="o">+</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">displ</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">cty</span><span class="p">)</span> <span class="o">+</span> <span class="nf">geom_point</span><span class="p">(</span><span class="nf">aes</span><span class="p">(</span><span class="n">color</span> <span class="o">=</span> <span class="n">hwy</span><span class="p">))</span> <span class="o">+</span> <span class="nf">scale_color_fermenter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="nf">geom_point</span><span class="p">(</span><span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span><span class="n">color</span> <span class="o">=</span> <span class="n">drv</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="n">cyl</span><span class="p">))</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">  <span class="nf">scale_color_brewer</span><span class="p">(</span><span class="n">palette</span> <span class="o">=</span> <span class="s">&#34;Set1&#34;</span><span class="p">)</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">  <span class="nf">scale_size_identity</span><span class="p">()</span>
</span></span></code></pre></div><dl>
<dt><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html"><code>scale_color_gradient</code></a></dt>
<dd>連続値のデフォルト色スケール。</dd>
<dd>グラデーションの基準となる色を自由に指定できるけど、
後述のviridisのようによく計算されたスケールを使ったほうが無難。</dd>
<dd><code>scale_color_gradient(..., low, high, ...)</code>: 普通の連続値に</dd>
<dd><code>scale_color_gradient2(..., low, mid, high, midpoint = 0, ...)</code>: ある中間値を挟んで上下に分けたいとき</dd>
<dd><code>scale_color_gradientn(..., colors, values = NULL, ...)</code>: 多色のヒートマップなどに e.g., <code>colors = c(&quot;#000000&quot;, &quot;#0000FF&quot;, &quot;#00FFFF&quot;, &quot;#00FF00&quot;, &quot;#FFFF00&quot;, &quot;#FF0000&quot;)</code></dd>
<dd>離散的に塗るには <a href="https://ggplot2.tidyverse.org/reference/scale_steps.html"><code>scale_color_steps()</code></a>。</dd>
<dt><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html"><code>scale_color_viridis_c</code></a></dt>
<dd>色覚多様性が考慮されたパレットで、グレースケールでの明度変化も一定。
使用例と詳細説明は<a href="https://sjmgarnier.github.io/viridis/">viridisパッケージのサイト</a>を参照。</dd>
<dd><code>option = &quot;viridis&quot;</code>, <code>&quot;magma&quot;</code>, <code>&quot;inferno&quot;</code>, <code>&quot;plasma&quot;</code>, <code>&quot;cividis&quot;</code>, <code>&quot;mako&quot;</code>, <code>&quot;rocket&quot;</code>, <code>&quot;turbo&quot;</code></dd>
<dd>連続値は <code>_c</code>、離散値は <code>_d</code>、連続値を離散的に塗るには <code>_b</code>。</dd>
<dd>黄色が明るすぎて白背景で見にくい場合などは <code>begin</code>, <code>end</code> オプションで調整可能。</dd>
<dt><a href="https://ggplot2.tidyverse.org/reference/scale_hue.html"><code>scale_color_hue</code></a></dt>
<dd>離散値のデフォルト色スケール。</dd>
<dt><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html"><code>scale_color_brewer</code></a></dt>
<dd>いい感じに考えられたパレット
<a href="https://colorbrewer2.org/">Colorbrewer</a> から選んべるので楽ちん。
利用可能なパレットは <code>RColorBrewer::display.brewer.all()</code> でも一覧できる。</dd>
<dd>離散値は <code>_brewer</code>、連続値は <code>_distiller</code>、連続値を離散的に塗るには <code>_fermenter</code>。</dd>
<dt><a href="https://ggplot2.tidyverse.org/reference/scale_identity.html"><code>scale_*_identity</code></a></dt>
<dd>for <code>color</code>, <code>fill</code>, <code>size</code>, <code>shape</code>, <code>linetype</code>, <code>alpha</code></dd>
<dd>色の名前やサイズなどを示す列が予めデータに含まれている場合にそのまま使う。</dd>
<dt><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html"><code>scale_*_manual</code></a></dt>
<dd>for <code>color</code>, <code>fill</code>, <code>size</code>, <code>shape</code>, <code>linetype</code>, <code>alpha</code></dd>
<dd>対応関係を手動で指定する。
e.g., <code>scale_color_manual(values = c(&quot;4&quot; = &quot;red&quot;, f = &quot;green&quot;, r = &quot;blue&quot;))</code></dd>
<dt><a href="https://ggplot2.tidyverse.org/reference/scale_size.html"><code>scale_size</code></a></dt>
<dd>デフォルトではpointの面積を値にほぼ比例させるが、面積0にはならない。
値0に面積0を対応させるには <code>scale_size_area()</code> を使う。
半径を比例させるには <code>scale_radius()</code> があるけど要注意。</dd>
</dl>
<p><a href="https://ggplot2.tidyverse.org/reference/scale_alpha.html"><code>scale_alpha(..., range = c(0.1, 1))</code></a><br>
<a href="https://ggplot2.tidyverse.org/reference/scale_linetype.html"><code>scale_linetype</code></a><br>
<a href="https://ggplot2.tidyverse.org/reference/scale_shape.html"><code>scale_shape</code></a></p>
<h3 id="スケール共通オプション">スケール共通オプション</h3>
<p>値と見え方の対応関係が凡例(legend/colorbar)として表示される。
<code>scale_*()</code> 関数に以下のオプションを指定することで設定を変えられる。
<a href="https://ggplot2.tidyverse.org/reference/continuous_scale.html">連続値の場合</a> と
<a href="https://ggplot2.tidyverse.org/reference/discrete_scale.html">離散値の場合</a>
で微妙に意味が変わるけどだいたいこんな感じ:</p>
<ul>
<li><code>name</code>: 凡例のタイトル。複数スケールで同じ名前にすると凡例が統合される。</li>
<li><code>breaks</code>: 目盛りや凡例に登場させる値。</li>
<li><code>n.breaks</code>: 目盛りをいくつに表示したいか。</li>
<li><code>labels</code>: breaksの値に対応して実際に表示されるラベル。
breaksの値を受け取って文字列を返す関数
(e.g., <code>scales::percent</code>, <code>scales::comma</code>) を渡すこともできる。</li>
<li><code>limits</code>: 数値なら最大値と最小値のvector。
文字列なら表示したいすべての値(順序も反映される)。</li>
<li><code>rescaler</code>: データの値を [0, 1] の範囲にrescaleする関数。
デフォルトは <code>scales::rescale()</code>。</li>
<li><code>oob</code>: out-of-boundsをどうするか。デフォルトは <code>NA</code> 扱い。
<code>scales::squish</code> を渡すとlimitsの値につぶす。</li>
<li><code>na.value</code>: 欠損値のときどうするか。</li>
<li><code>guide</code>: 文字列で <code>&quot;legend&quot;</code> か <code>&quot;colorbar&quot;</code>。
さらに細かく制御したい場合は
<a href="https://ggplot2.tidyverse.org/reference/guide_legend.html"><code>guide_legend()</code></a> や
<a href="https://ggplot2.tidyverse.org/reference/guide_colorbar.html"><code>guide_colorbar()</code></a>
で。消したい場合は <code>&quot;none&quot;</code> か <code>FALSE</code> を渡せる。<br>
軸ラベルが密すぎて重なる場合に間引いたり、角度を付けたり、ずらしたりするには
<a href="https://ggplot2.tidyverse.org/reference/guide_axis.html"><code>guide_axis()</code></a>
が使える。<br>
これらを複数使う場合はscale関数のオプションではなく独立の
<a href="https://ggplot2.tidyverse.org/reference/guides.html"><code>guides()</code></a>
関数を使う手もある。</li>
</ul>
<h3 id="変数によってパネルを分割する">変数によってパネルを分割する</h3>
<p>多変量データを俯瞰するには、データに応じたパネル分割も便利。
色・サイズなどと合わせれば、x軸y軸プラス3次元程度はパッと可視化できることになる。</p>
<dl>
<dt><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html"><code>facet_wrap()</code></a></dt>
<dd>1変数で分割して並べる
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">facet_wrap</span><span class="p">(</span><span class="n">facets</span><span class="p">,</span> <span class="n">nrow</span> <span class="o">=</span> <span class="kc">NULL</span><span class="p">,</span> <span class="n">ncol</span> <span class="o">=</span> <span class="kc">NULL</span><span class="p">,</span> <span class="n">scales</span> <span class="o">=</span> <span class="s">&#34;fixed&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="n">shrink</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> <span class="n">labeller</span> <span class="o">=</span> <span class="s">&#34;label_value&#34;</span><span class="p">,</span> <span class="n">as.table</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="kr">switch</span> <span class="o">=</span> <span class="kc">NULL</span><span class="p">,</span> <span class="n">drop</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> <span class="n">dir</span> <span class="o">=</span> <span class="s">&#34;h&#34;</span><span class="p">,</span> <span class="n">strip.position</span> <span class="o">=</span> <span class="s">&#34;top&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">p3</span> <span class="o">+</span> <span class="nf">facet_wrap</span><span class="p">(</span><span class="nf">vars</span><span class="p">(</span><span class="n">class</span><span class="p">),</span> <span class="n">ncol</span> <span class="o">=</span> <span class="m">4L</span><span class="p">)</span> <span class="c1"># new style</span>
</span></span><span class="line"><span class="cl"><span class="n">p3</span> <span class="o">+</span> <span class="nf">facet_wrap</span><span class="p">(</span><span class="o">~</span> <span class="n">class</span><span class="p">,</span> <span class="n">ncol</span> <span class="o">=</span> <span class="m">4L</span><span class="p">)</span>     <span class="c1"># old style</span>
</span></span></code></pre></div></dd>
<dt><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html"><code>facet_grid()</code></a></dt>
<dd>2変数以上で分割して縦横に並べる
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">facet_grid</span><span class="p">(</span><span class="n">rows</span> <span class="o">=</span> <span class="kc">NULL</span><span class="p">,</span> <span class="n">cols</span> <span class="o">=</span> <span class="kc">NULL</span><span class="p">,</span> <span class="n">scales</span> <span class="o">=</span> <span class="s">&#34;fixed&#34;</span><span class="p">,</span> <span class="n">space</span> <span class="o">=</span> <span class="s">&#34;fixed&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="n">shrink</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> <span class="n">labeller</span> <span class="o">=</span> <span class="s">&#34;label_value&#34;</span><span class="p">,</span> <span class="n">as.table</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="kr">switch</span> <span class="o">=</span> <span class="kc">NULL</span><span class="p">,</span> <span class="n">drop</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> <span class="n">margins</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">,</span> <span class="n">facets</span> <span class="o">=</span> <span class="kc">NULL</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">p3</span> <span class="o">+</span> <span class="nf">facet_grid</span><span class="p">(</span><span class="nf">vars</span><span class="p">(</span><span class="n">cyl</span><span class="p">),</span> <span class="nf">vars</span><span class="p">(</span><span class="n">class</span><span class="p">,</span> <span class="n">drv</span><span class="p">))</span> <span class="c1"># new style</span>
</span></span><span class="line"><span class="cl"><span class="n">p3</span> <span class="o">+</span> <span class="nf">facet_grid</span><span class="p">(</span><span class="n">cyl</span> <span class="o">~</span> <span class="n">class</span> <span class="o">+</span> <span class="n">drv</span><span class="p">)</span>           <span class="c1"># old style</span>
</span></span></code></pre></div><p>1変数でいい場合は <code>. ~ class</code> のように片方をドットにする。</p>
</dd>
<dt><a href="https://ggplot2.tidyverse.org/reference/labellers.html">ファセットラベルの調整 <code>labeller =</code></a></dt>
<dd>デフォルトでは値だけがfacetラベルに表示されるが、
変数名を同時に表示したり、数式を表示したりもできる。
それを変数ごとに指定したい場合は
<a href="https://ggplot2.tidyverse.org/reference/labeller.html"><code>labeller()</code></a>
関数を使う。e.g.,<br>
<code>labeller = labeller(cyl = label_both, class = label_value)</code></dd>
<dd>見た目の調整はテーマの <code>strip.*</code> で。</dd>
</dl>
<p>パネル同士が近すぎて <code>axis.text</code> が重なってしまう場合は
<code>theme(panel.spacing = grid::unit(1, &quot;lines&quot;))</code>
などとすれば間隔を空けられる。</p>
<h3 id="内部変数を使う">内部変数を使う</h3>
<p>ヒストグラムや箱ヒゲなどの表示に必要な計算は <code>stat_*()</code> を通して内部的に行われる。
そうした値の一部は <a href="https://ggplot2.tidyverse.org/reference/aes_eval.html"><code>after_stat()</code></a> 関数を通じて参照し、 <code>aes()</code> 内で使うことができる。
例えば <code>geom_histogram()</code> や <code>geom_bar()</code> の縦軸を生のカウントから密度に変えるには
<code>aes(y = after_stat(density))</code> のようにする。
(昔は <code>..density..</code> とか <code>stat(density)</code> のようにしていた。)</p>
<p>これらはggplotオブジェクトを作るときではなく、描画するときに計算されるらしい。
強制的にそこまで計算させて値を参照するには <code>ggplot_build()</code> を使う。
たとえば <code>h = hist(mpg$cty)</code> のようなものを取得したいときは:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">p</span> <span class="o">=</span> <span class="nf">ggplot</span><span class="p">(</span><span class="n">mpg</span><span class="p">)</span> <span class="o">+</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">cty</span><span class="p">)</span> <span class="o">+</span> <span class="nf">geom_histogram</span><span class="p">(</span><span class="n">bins</span> <span class="o">=</span> <span class="m">6L</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nf">ggplot_build</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">$</span><span class="n">data[[1L]]</span>
</span></span><span class="line"><span class="cl"><span class="c1"># layer_data(p)</span>
</span></span></code></pre></div><p>colorとfillを同色の透明度違いにする、とかやりたい場合も似たようなイメージで、
<a href="https://ggplot2.tidyverse.org/reference/aes_eval.html">after_scale()</a>
を使って計算後・描画前に割り込める。</p>
<p><a href="https://ggplot2-book.org/layers.html#generated-variables">https://ggplot2-book.org/layers.html#generated-variables</a></p>
<h2 id="座標軸やタイトルを変更">座標軸やタイトルを変更</h2>
<dl>
<dt><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">軸の区切りを変更したり対数にしたり</a></dt>
<dd><code>scale_x_continuous(breaks = seq(10, 100, by = 10))</code></dd>
<dd><code>scale_y_log10(&quot;Beer consumption&quot;)</code></dd>
<dd><code>scale_y_reverse()</code></dd>
<dd>上記の<a href="#スケール共通オプション">スケール共通オプション</a>に加えて:
<ul>
<li><a href="https://ggplot2.tidyverse.org/reference/expansion.html"><code>expand = expansion(mult, add)</code></a>:
デフォルトでは値域よりも少し(連続値5%、離散値0.6個分)だけ広く描かれるので、
それをゼロにするとか、もっと広くとるとか。</li>
<li><code>trans</code>: 数値の変換。exp, identity, log, log10, reciprocal, reverse など。
文字列変数の順序を変えたい場合は <code>limits</code> のほうを使う。</li>
<li><code>position</code>: top, bottom, left, right</li>
<li><code>sec.axis</code>: 第二軸</li>
</ul>
</dd>
<dt><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html">描画する範囲を指定</a></dt>
<dd><code>ylim(0, 42) + xlim(&quot;b&quot;, &quot;c&quot;, &quot;d&quot;)</code></dd>
<dd><code>coord_cartesian(xlim = NULL, ylim = NULL)</code></dd>
<dd>前者はデータそのものを切るが、後者はデータを変えずに描画領域だけ切る</dd>
<dd>ゼロを含むようにちょっと伸ばすだけとかなら
<a href="https://ggplot2.tidyverse.org/reference/expand_limits.html"><code>expand_limits(x = 0)</code></a>
が便利。</dd>
<dt><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html">X軸とY軸の比率を固定</a></dt>
<dd><code>coord_fixed(ratio = 1)</code></dd>
<dt><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">XY軸の転置</a></dt>
<dd><code>coord_flip()</code> もまだ提供されているが、使わなくても実現可能。</dd>
<dd>大抵 <code>aes()</code> の <code>x</code> と <code>y</code> を入れ替えるだけ。
<code>geom_histogram()</code> などでは <code>aes(y =</code> にマッピング。</dd>
<dd><code>geom_col()</code>, <code>geom_area()</code> などには <code>orientation = &quot;y&quot;</code> オプションも渡す。</dd>
<dt><a href="https://ggplot2.tidyverse.org/reference/coord_polar.html">極座標</a></dt>
<dd>パイチャートも作れるらしい</dd>
<dt><a href="https://ggplot2.tidyverse.org/reference/coord_trans.html">座標変換</a></dt>
<dd><code>coord_trans(x = &quot;log10&quot;, y = &quot;sqrt&quot;)</code></dd>
<dd>表示する座標を変換する。
stat前に適用される <code>scale_x_*</code> とは微妙に違う。</dd>
<dt><a href="https://ggplot2.tidyverse.org/reference/labs.html">軸ラベルとタイトル</a></dt>
<dd><code>labs(x = &quot;time&quot;, y = &quot;weight&quot;, title = &quot;growth&quot;, tag = &quot;A&quot;)</code></dd>
<dd><code>xlab(&quot;time&quot;) + ylab(&quot;weight&quot;) + ggtitle(&quot;growth&quot;)</code></dd>
<dt><a href="https://ggplot2.tidyverse.org/reference/draw_key.html">凡例</a></dt>
<dd>散布図なら点、折れ線なら線が凡例のキーとして自動的に選ばれるが、
<code>geom_line(key_glyph = draw_key_rect)</code>
のように変更することもできる。</dd>
</dl>
<h2 id="theme-背景やラベルの調整"><code>theme</code>: 背景やラベルの調整</h2>
<p><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">https://ggplot2.tidyverse.org/reference/ggtheme.html</a></p>
<h3 id="既成テーマ">既成テーマ</h3>
<dl>
<dt><code>theme_gray(base_size = 11, base_family = &quot;&quot;)</code>, <code>theme_grey()</code></dt>
<dd>灰色背景に白い格子。
ggplotらしいデフォルトだが、論文には使いにくい。</dd>
<dt><code>theme_bw()</code></dt>
<dd>黒枠白背景にうっすら灰色格子</dd>
<dt><code>theme_linedraw()</code></dt>
<dd>細いけど濃い色の <code>panel.grid</code></dd>
<dt><code>theme_light()</code></dt>
<dd>それを薄くした感じ</dd>
<dt><code>theme_minimal()</code></dt>
<dd>外枠なしの <code>theme_bw</code></dd>
<dt><code>theme_classic()</code></dt>
<dd>xy軸がL字に描かれているだけで枠もグリッドも無し</dd>
<dt><code>theme_dark()</code></dt>
<dd>濃灰色背景に黒い格子。黄色の点とかが見やすい。</dd>
<dt><code>theme_void()</code></dt>
<dd>完全に枠なし</dd>
</dl>
<p>これらをカッコ無しでコンソールに打ち込むと、
下記の各エレメントの設定方法やデフォルト値を知ることができる。</p>
<p>引数に <code>base_family = &quot;Helvetica Neue&quot;</code> などとしてフォントを指定できる。
テーマを構成する <code>axis.text</code> などはこの設定を継承するが、
<code>geom_text()</code> や <code>annotate(&quot;text&quot;, ...)</code> などプロット内部の要素には影響しないことに注意。</p>
<p>どうしても日本語を表示しないといけない場合は
<a href="https://ill-identified.hatenablog.com/entry/2020/10/03/200618">https://ill-identified.hatenablog.com/entry/2020/10/03/200618</a>
を参考にして設定する。</p>
<p>オプションとして <code>base_line_size</code>, <code>base_rect_size</code> もいじれるようになった。</p>
<p>ほかにもいろんなテーマが
<a href="https://cran.r-project.org/web/packages/ggthemes/">ggthemes</a>
というパッケージなどで提供されている。</p>
<h3 id="設定項目">設定項目</h3>
<p><a href="https://ggplot2.tidyverse.org/reference/theme.html">https://ggplot2.tidyverse.org/reference/theme.html</a></p>
<p><code>theme()</code> 関数に項目と値を指定したものを、
ほかのレイヤーと同じようにどんどん足していける。
テーマは直線、長方形、文字の3種類のエレメントからなり、
<a href="#%E3%82%A8%E3%83%AC%E3%83%A1%E3%83%B3%E3%83%88">後述の <code>element_***()</code></a>を介して変更していく。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="c1">## ベースとなるテーマを先に適用してから微調整</span>
</span></span><span class="line"><span class="cl"><span class="n">p3</span> <span class="o">+</span> <span class="nf">theme_bw</span><span class="p">()</span> <span class="o">+</span> <span class="nf">theme</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="n">panel.background</span> <span class="o">=</span> <span class="nf">element_rect</span><span class="p">(</span><span class="n">fill</span> <span class="o">=</span> <span class="s">&#34;white&#34;</span><span class="p">),</span> <span class="c1"># 箱</span>
</span></span><span class="line"><span class="cl">  <span class="n">panel.grid</span>       <span class="o">=</span> <span class="nf">element_line</span><span class="p">(</span><span class="n">color</span> <span class="o">=</span> <span class="s">&#34;blue&#34;</span><span class="p">),</span> <span class="c1"># 線</span>
</span></span><span class="line"><span class="cl">  <span class="n">axis.title</span>       <span class="o">=</span> <span class="nf">element_text</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="m">32</span><span class="p">),</span>      <span class="c1"># 文字</span>
</span></span><span class="line"><span class="cl">  <span class="n">axis.text</span>        <span class="o">=</span> <span class="nf">element_blank</span><span class="p">()</span>               <span class="c1"># 消す</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></div><dl>
<dt>全体</dt>
<dd><code>line</code>: (<code>element_line</code>)</dd>
<dd><code>rect</code>: (<code>element_rect</code>)</dd>
<dd><code>text</code>: (<code>element_text</code>)</dd>
<dd><code>title</code>: (<code>element_text</code>; inherits from <code>text</code>)</dd>
<dd><code>aspect.ratio</code>:</dd>
<dt>軸タイトル、軸ラベル、目盛</dt>
<dd><code>axis.title</code>: (<code>element_text</code>; inherits from <code>text</code>)<br>
 <code>__.x</code>, <code>__.x.top</code>, <code>__.y</code>, <code>__.y.right</code></dd>
<dd><code>axis.text</code>: (<code>element_text</code>; inherits from <code>text</code>)<br>
 <code>__.x</code>, <code>__.x.top</code>, <code>__.y</code>, <code>__.y.right</code></dd>
<dd><code>axis.ticks</code>: (<code>element_line</code>; inherits from <code>line</code>)<br>
 <code>__.x</code>, <code>__.y</code></dd>
<dd><code>axis.ticks.length</code>: (<code>unit</code>)</dd>
<dd><code>axis.line</code>: (<code>element_line</code>; inherits from <code>line</code>)<br>
 <code>__.x</code>, <code>__.y</code></dd>
<dt>凡例</dt>
<dd><code>legend.background</code>: (<code>element_rect</code>; inherits from <code>rect</code>)</dd>
<dd><code>legend.margin</code>: (<code>margin</code>)</dd>
<dd><code>legend.spacing</code>:(<code>unit</code>)<br>
 <code>__.x</code>, <code>__.y</code></dd>
<dd><code>legend.key</code>: (<code>element_rect</code>; inherits from <code>rect</code>)</dd>
<dd><code>legend.key.size</code>: (<code>unit</code>)</dd>
<dd><code>legend.key.height</code>: (<code>unit</code>; inherits from <code>legend.key.size</code>)</dd>
<dd><code>legend.key.width</code>: (<code>unit</code>; inherits from <code>legend.key.size</code>)</dd>
<dd><code>legend.frame</code>: (<code>element_rect</code>)</dd>
<dd><code>legend.text</code>: (<code>element_text</code>; inherits from <code>text</code>)</dd>
<dd><code>legend.title</code>: (<code>element_text</code>; inherits from <code>title</code>)</dd>
<dd><code>legend.title.position</code>: (<code>&quot;top&quot;</code>, <code>&quot;right&quot;</code>, <code>&quot;bottom&quot;</code>, <code>&quot;left&quot;</code>)</dd>
<dd><code>legend.position</code>: (<code>&quot;none&quot;</code>, <code>&quot;left&quot;</code>, <code>&quot;right&quot;</code>, <code>&quot;bottom&quot;</code>, <code>&quot;top&quot;</code>, <code>&quot;inside&quot;</code>)</dd>
<dd><code>legend.position.inside</code>: (<code>c(1, 1)</code> で右上)</dd>
<dd><code>legend.direction</code>: (<code>&quot;horizontal&quot;</code> or <code>&quot;vertical&quot;</code>)</dd>
<dd><code>legend.justification</code>: (<code>&quot;center&quot;</code> or <code>c(0, 1)</code> のような数値でアンカー位置を指定)<br>
 <code>__.top</code>, <code>__.bottom</code>, <code>__.left</code>, <code>__.right</code>, <code>__.inside</code></dd>
<dd><code>legend.location</code>: (<code>&quot;panel&quot;</code>, <code>&quot;plot&quot;</code>)</dd>
<dd><code>legend.box</code>: (<code>&quot;horizontal&quot;</code> or <code>&quot;vertical&quot;</code>)</dd>
<dd><code>legend.box.just</code>: (<code>&quot;top&quot;</code>, <code>&quot;bottom&quot;</code>, <code>&quot;left&quot;</code>, or <code>&quot;right&quot;</code>)</dd>
<dd><code>legend.box.margin</code>: (<code>margin</code>)</dd>
<dd><code>legend.box.background: (</code>element_rect<code>; inherits from </code>rect`)</dd>
<dd><code>legend.box.spacing</code>:(<code>unit</code>)</dd>
<dt>プロット領域の背景、余白、格子</dt>
<dd><code>panel.background</code>: (<code>element_rect</code>; inherits from <code>rect</code>)</dd>
<dd><code>panel.border</code>: (<code>element_rect</code>; inherits from <code>rect</code>; should be used with <code>fill = NA</code>)</dd>
<dd><code>panel.spacing</code>: (<code>unit</code>; <code>facet_*</code> の間隔)<br>
 <code>__.x</code>, <code>__.y</code></dd>
<dd><code>panel.grid</code>: (<code>element_line</code>; inherits from <code>line</code>)</dd>
<dd><code>panel.grid.major</code>: (<code>element_line</code>; inherits from <code>panel.grid</code>)<br>
 <code>__.x</code>, <code>__.y</code></dd>
<dd><code>panel.grid.minor</code>: (<code>element_line</code>; inherits from <code>panel.grid</code>)<br>
 <code>__.x</code>, <code>__.y</code></dd>
<dt>全体の背景、タイトル、余白</dt>
<dd><code>plot.background</code>: (<code>element_rect</code>; inherits from <code>rect</code>)</dd>
<dd><code>plot.title</code>: (<code>element_text</code>; inherits from <code>title</code>)</dd>
<dd><code>plot.title.position</code>: (<code>&quot;panel&quot;</code> or <code>&quot;plot&quot;</code>)</dd>
<dd><code>plot.subtitle</code>: (<code>element_text</code>; inherits from <code>title</code>)</dd>
<dd><code>plot.caption</code>: (<code>element_text</code>; inherits from <code>title</code>)</dd>
<dd><code>plot.tag</code>: (<code>element_text</code>; inherits from <code>title</code>)</dd>
<dd><code>plot.tag.position</code>: (<code>&quot;topleft&quot;</code>, <code>&quot;top&quot;</code>, <code>&quot;topright&quot;</code>, <code>&quot;left&quot;</code>, <code>&quot;right&quot;</code>, <code>&quot;bottomleft&quot;</code>, <code>&quot;bottom&quot;</code>, <code>&quot;bottomright&quot;</code>)</dd>
<dd><code>plot.tag.location</code>: (<code>&quot;panel&quot;</code>, <code>&quot;plot&quot;</code>, <code>&quot;margin&quot;</code>)</dd>
<dd><code>plot.margin</code>: (<code>unit</code> with the sizes of the top, right, bottom, and left margins)</dd>
<dt><code>facet</code> したときのラベル</dt>
<dd><code>strip.background</code>: (<code>element_rect</code>; inherits from <code>rect</code>)</dd>
<dd><code>strip.placement</code>: (&ldquo;inside&rdquo;, &ldquo;outside&rdquo;)</dd>
<dd><code>strip.text</code>: (<code>element_text</code>; inherits from <code>text</code>)<br>
 <code>__.x</code>, <code>__.y</code></dd>
<dt>その他</dt>
<dd><code>complete</code>: 部分的な変更か、完全なテーマか (<code>FALSE</code>)</dd>
<dd><code>validate</code>: 毎回チェックするか (<code>TRUE</code>)</dd>
</dl>
<h3 id="エレメント">エレメント</h3>
<dl>
<dt><code>element_rect(fill, color, size, linetype, inherit.blank)</code> &mdash; 長方形</dt>
<dd><code>fill</code>: 塗りつぶしの色</dd>
<dd><code>color</code>: 枠の色</dd>
</dl>
<p><code>element_line(color, size, linetype, lineend, arrow, inherit.blank)</code> &mdash; 線</p>
<dl>
<dt><code>element_text(family, face, color, size, hjust, vjust, angle, lineheight, margin)</code> &mdash; 文字</dt>
<dd><code>family</code>: フォントファミリー。 空なら <code>base_family</code> を継承。</dd>
<dd><code>face</code>: (<code>&quot;plain&quot;</code>, <code>&quot;italic&quot;</code>, <code>&quot;bold&quot;</code>, <code>&quot;bold.italic&quot;</code>)</dd>
<dd><code>hjust</code>, <code>vjust</code>: 水平位置と垂直位置の寄せ方をそれぞれ <code>[0, 1]</code> の実数で。</dd>
<dd><code>angle</code>: 角度 <code>[0, 360]</code></dd>
<dd><code>margin</code>: スペース調整を関数 <code>margin(top, right, bottom, left)</code> 越しに。</dd>
<dt><code>element_blank()</code> &mdash; 空</dt>
<dd>消したい要素にはこれを指定する</dd>
<dt><code>rel(x)</code></dt>
<dd>デフォルトからの相対値で <code>size</code> 引数を指定したいときに。</dd>
<dt><code>grid::unit(x, units, data = NULL)</code></dt>
<dd>こちらは絶対指定。<code>grid</code> パッケージに入ってる。
units で使いそうなのは
<code>cm</code>, <code>mm</code>, <code>inches</code>, <code>points</code>, <code>lines</code>, <code>native</code></dd>
<dt><code>grid::arrow(angle, length, ends, type)</code></dt>
<dd><code>axis.line</code> の <code>element_line()</code> にこれを与えて軸を矢印にするとか。</dd>
<dt><code>margin(t = 0, r = 0, b = 0, l = 0, unit = &quot;pt&quot;)</code></dt>
<dd>marginクラス</dd>
<dt><code>calc_element(element, theme, verbose = FALSE)</code></dt>
<dd>継承などを考慮した上でelementがどんな値にセットされるか確かめる。</dd>
</dl>
<h2 id="ファイルに書き出す">ファイルに書き出す</h2>
<p>RStudioやQuartzの保存ダイアログを利用して書き出すこともできるけど、
それだとサイズ調整やファイル名入力を手作業でやることになってしまう。
<code>ggsave()</code> をスクリプトに書いておけば何回でも同じ設定で出力できる。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">ggsave</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">plot</span> <span class="o">=</span> <span class="nf">last_plot</span><span class="p">(),</span> <span class="n">device</span> <span class="o">=</span> <span class="kc">NULL</span><span class="p">,</span> <span class="n">path</span> <span class="o">=</span> <span class="kc">NULL</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">       <span class="n">scale</span> <span class="o">=</span> <span class="m">1</span><span class="p">,</span>  <span class="n">width</span> <span class="o">=</span> <span class="kc">NA</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="kc">NA</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">       <span class="n">units</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;in&#34;</span><span class="p">,</span> <span class="s">&#34;cm&#34;</span><span class="p">,</span> <span class="s">&#34;mm&#34;</span><span class="p">),</span> <span class="n">dpi</span> <span class="o">=</span> <span class="m">300</span><span class="p">,</span> <span class="n">limitsize</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> <span class="kc">...</span><span class="p">)</span>
</span></span></code></pre></div><ul>
<li>画像形式はファイル名の拡張子から自動的に判別される
(e.g., <code>diamonds.png</code>, <code>diamonds.pdf</code>)。</li>
<li><code>width</code>や<code>height</code>を小さくするほど、文字・点・線などの要素が相対的に大きくなる。</li>
<li><code>dpi</code>を変えることで、見た目のバランスを保ったまま解像度を変えられる。
(これはPNGなどラスタ形式だけの話。PDFなどのベクタ形式なら気にしなくていい)</li>
<li>タイトルや軸ラベルの文字サイズを変えたいときはテーマの
<code>theme_bw(base_size = 42)</code> や各要素の <code>element_text(size = 42)</code> を使う。</li>
<li><code>scale =</code> や <code>units =</code> を使うのはよほど必要になったときだけ。</li>
<li>PDF出力でフォント関連の問題が生じたら <code>device = cairo_pdf</code> を試す。</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="c1"># 7inch x 300dpi = 2100px四方 (デフォルト)</span>
</span></span><span class="line"><span class="cl"><span class="nf">ggsave</span><span class="p">(</span><span class="s">&#34;mpg1.png&#34;</span><span class="p">,</span> <span class="n">p3</span><span class="p">)</span> <span class="c1"># width = 7, height = 7, dpi = 300</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 4     x 300    = 1200  全体7/4倍ズーム</span>
</span></span><span class="line"><span class="cl"><span class="nf">ggsave</span><span class="p">(</span><span class="s">&#34;mpg2.png&#34;</span><span class="p">,</span> <span class="n">p3</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="m">4</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="m">4</span><span class="p">)</span> <span class="c1"># dpi = 300</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 2     x 600    = 1200  全体をさらに2倍ズーム</span>
</span></span><span class="line"><span class="cl"><span class="nf">ggsave</span><span class="p">(</span><span class="s">&#34;mpg3.png&#34;</span><span class="p">,</span> <span class="n">p3</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="m">2</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="m">2</span><span class="p">,</span> <span class="n">dpi</span> <span class="o">=</span> <span class="m">600</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 4     x 300    = 1200  テーマを使って文字だけ拡大</span>
</span></span><span class="line"><span class="cl"><span class="nf">ggsave</span><span class="p">(</span><span class="s">&#34;mpg4.png&#34;</span><span class="p">,</span> <span class="n">p3</span> <span class="o">+</span> <span class="nf">theme_bw</span><span class="p">(</span><span class="n">base_size</span> <span class="o">=</span> <span class="m">22</span><span class="p">),</span> <span class="n">width</span> <span class="o">=</span> <span class="m">4</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="m">4</span><span class="p">)</span>
</span></span></code></pre></div><h2 id="プロットの種類">プロットの種類</h2>
<dl>
<dt><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">散布図</a></dt>
<dd><code>geom_point(size = 2, alpha = 0.3)</code></dd>
<dd>重なった点をランダムにばらかしたいときは
<a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html"><code>geom_jitter()</code></a></dd>
<dd><a href="https://ggplot2.tidyverse.org/articles/ggplot2-specs.html#sec:shape-spec">点の形(shape)一覧</a></dd>
<dd>デフォルトの <code>shape = 19</code> の丸は半透明にすると縁取りしたように見えてしまう。
<code>shape = 16</code> の丸は均一なのでこっちを常に使うように設定できればいいんだけど。</dd>
<dt><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">折れ線グラフ</a></dt>
<dd><code>geom_path(size = 2, linetype = &quot;dashed&quot;)</code> データ順に結ぶ</dd>
<dd><code>geom_line()</code> x軸上の順で結ぶ</dd>
<dd><code>geom_step()</code> 階段状に結ぶ</dd>
<dd><a href="https://ggplot2.tidyverse.org/articles/ggplot2-specs.html#sec:line-type-spec">線の種類(linetype)一覧</a></dd>
<dt><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html">面グラフ</a></dt>
<dd><code>geom_ribbon()</code> &mdash; yminからymaxの面</dd>
<dd><code>geom_area()</code> &mdash; 0からyの面</dd>
<dt><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">ヒストグラム、密度曲線</a></dt>
<dd><code>geom_histogram()</code> &mdash; 棒グラフ(連続値を<code>stat_bin()</code> で区切って)</dd>
<dd><code>geom_bar()</code> &mdash; 棒グラフ(離散値を<code>stat_count()</code>で数えて)</dd>
<dd><code>geom_freqpoly()</code> &mdash; 折れ線</dd>
<dd><code>geom_density()</code> &mdash; 密度推定されたスムーズな線</dd>
<dd><code>geom_bin2d()</code> &mdash; 二次元ヒストグラム</dd>
<dd><code>geom_hex()</code> &mdash; 六角形版二次元ヒストグラム</dd>
<dt><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">棒グラフ</a></dt>
<dd><code>geom_col()</code></dd>
<dd>グループ分けする場合のオプション:
<ul>
<li><a href="https://ggplot2.tidyverse.org/reference/position_stack.html"><code>position = &quot;stack&quot;</code></a>:
縦に積み重ねる (デフォルト)</li>
<li><a href="https://ggplot2.tidyverse.org/reference/position_dodge.html"><code>position = &quot;dodge&quot;</code></a>:
横に並べる</li>
<li><code>position = &quot;fill&quot;</code>: 縦に積み重ね、高さを1に揃えて割合を示す</li>
</ul>
</dd>
<dt>箱ひげ図とその代替案</dt>
<dd><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html"><code>geom_boxplot()</code></a>:
生データの分布に関する情報量が落ちすぎるので要注意。</dd>
<dd><a href="https://ggplot2.tidyverse.org/reference/geom_violin.html"><code>geom_violin(scale = &quot;count&quot;)</code></a>:
箱ひげ図よりは密度が分かりやすいけど、推定であることとスケールに注意。</dd>
<dd><a href="https://github.com/clauswilke/ggridges"><code>ggridges::geom_density_ridges()</code></a>:
violinの片側を横にしたようなもの。</dd>
<dd><a href="https://ggplot2.tidyverse.org/reference/geom_dotplot.html"><code>geom_dotplot()</code></a>
or <a href="https://github.com/eclarke/ggbeeswarm"><code>ggbeeswarm::geom_beeswarm()</code></a>:
生データの分布が読み取りやすい。</dd>
<dt><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html">ヒートマップ</a></dt>
<dd><code>geom_tile(aes(fill = z))</code></dd>
<dd><code>geom_raster(aes(fill = z))</code> &mdash; 各タイルの大きさを揃える制約のため高速</dd>
<dt><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html">エラーバー</a></dt>
<dd><code>geom_errorbar(aes(ymax = y + se, ymin = y - se), width = 0.1)</code></dd>
<dd><code>geom_linerange(...)</code></dd>
<dd><code>geom_pointrange(...)</code></dd>
<dt><a href="https://ggplot2.tidyverse.org/reference/stat_function.html">関数</a></dt>
<dd><code>ggplot(data.frame(x = c(-4, 4))) + aes(x) + stat_function(fun = dnorm, args = c(0, 1), n = 200)</code></dd>
<dt><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">回帰曲線</a></dt>
<dd><code>geom_smooth(method = glm, method.args = list(family = poisson), se = FALSE)</code></dd>
<dt><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html">始点と終点で曲線や矢印を描く</a></dt>
<dd><code>geom_curve(aes(x, y, xend, yend), curvature = -0.2)</code></dd>
<dd><code>geom_segment(aes(x, y, xend, yend), arrow = arrow(type = &quot;closed&quot;), linejoin = &quot;mitre&quot;)</code></dd>
<dd>矢印の調整は<a href="https://www.rdocumentation.org/packages/grid/topics/arrow"><code>grid::arrow()</code></a>。
普通の線より矢尻の分だけ長くなることに注意。</dd>
<dt><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">切片と傾きで直線を描く</a></dt>
<dd><code>geom_abline(intercept = 3, slope = 5)</code></dd>
<dd><code>geom_hline(yintercept = 7) + geom_vline(xintercept = 11)</code></dd>
<dd>これらは <code>annotate()</code> 的な位置づけであり、ほかの <code>geom_</code> 関数とはかなり挙動が違う。
そのためか <code>annotate(&quot;hline&quot;, yintercept = 7)</code> なども思い通りの結果にはならない。</dd>
<dt><a href="https://ggplot2.tidyverse.org/reference/annotate.html">文字列や図形を書き加える</a></dt>
<dd><code>annotate(&quot;text&quot;, x = 1:4, y = 4:1, label = sprintf(&quot;x = %d&quot;, 1:4))</code></dd>
<dd>テーマの <code>base_family</code> は引き継がれないので <code>family =</code> で指定すべし。</dd>
<dd>数式を表示するには <code>label = &quot;italic(N[t])&quot;</code> のような文字列で渡して <code>parse = TRUE</code>。</dd>
<dd>データ範囲によらず相対位置を指定したいとき、公式のオプションは無いが、
<code>annotate(&quot;text&quot;, x = -Inf, y = Inf, hjust = 0, vjust = 1, label = &quot;top-left&quot;)</code>
のように <code>Inf</code> とjustificationを駆使すれば端付近に置くことができる。</dd>
<dd>データ点に対応する文字列を添えるには
<code>geom_text(aes(label = foo))</code> のほうが適している。
オプションで <code>nudge_x = 2, nudge_y = 2</code> などとすれば点と重ならないようにずらせる。
<a href="https://ggplot2.tidyverse.org/reference/position_nudge.html"><code>position_nudge()</code></a></dd>
</dl>
<h2 id="extensions">Extensions</h2>
<ul>
<li><a href="https://ggplot2.tidyverse.org/articles/extending-ggplot2.html">https://ggplot2.tidyverse.org/articles/extending-ggplot2.html</a></li>
<li><a href="https://exts.ggplot2.tidyverse.org/">https://exts.ggplot2.tidyverse.org/</a></li>
</ul>
<p>ggplotを拡張するための仕組みがversion 2.0から正式に導入され、
ユーザーが独自の stats や geom を作って登録することが容易になった。</p>
<h3 id="gridextra"><code>gridExtra</code></h3>
<p><a href="https://github.com/baptiste/gridextra/wiki">https://github.com/baptiste/gridextra/wiki</a></p>
<p>データによって自動的にパネルを分割するには
<code>facet_grid()</code> や <code>facet_wrap()</code> を使えばよいが、
関係ない複数の図を1枚に描きたい場合は <code>grid</code> や <code>gtable</code> の機能を使う必要がある。
<code>gridExtra</code> はそのへんの操作を手軽にできるようにしてくれるパッケージ。
<strong>残念ながら開発中止？</strong></p>
<p>&ldquo;grob&rdquo; は &ldquo;grid graphical object&rdquo; の略。
ggplotオブジェクトと同じように <code>ggsave()</code> に渡して保存可能。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">grob</span> <span class="o">=</span> <span class="n">gridExtra</span><span class="o">::</span><span class="nf">arrangeGrob</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">nrow</span> <span class="o">=</span> <span class="m">2</span><span class="p">,</span> <span class="n">ncol</span> <span class="o">=</span> <span class="m">1</span><span class="p">,</span> <span class="n">bottom</span> <span class="o">=</span> <span class="s">&#34;Time&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nf">grid.newpage</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="nf">grid.draw</span><span class="p">(</span><span class="n">grob</span><span class="p">)</span>
</span></span></code></pre></div><p>複数ページのPDFに書き出したい場合は
<a href="/rstats/purrr.html">purrr</a> などを使って list of ggplots を作っておき、
<code>marrangeGrob()</code> に渡す。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">.grobs</span> <span class="o">=</span> <span class="n">purrr</span><span class="o">::</span><span class="nf">map</span><span class="p">(</span><span class="n">.dataframes</span><span class="p">,</span> <span class="n">my_ggplot_func</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">.gtable</span> <span class="o">=</span> <span class="n">gridExtra</span><span class="o">::</span><span class="nf">marrangeGrob</span><span class="p">(</span><span class="n">.grobs</span><span class="p">,</span> <span class="n">nrow</span> <span class="o">=</span> <span class="m">4</span><span class="p">,</span> <span class="n">ncol</span> <span class="o">=</span> <span class="m">3</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nf">ggsave</span><span class="p">(</span><span class="s">&#34;multi_page.pdf&#34;</span><span class="p">,</span> <span class="n">.gtable</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="m">7</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="m">9.9</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="cowplot"><code>cowplot</code></h3>
<ul>
<li><a href="https://github.com/wilkelab/cowplot">https://github.com/wilkelab/cowplot</a></li>
<li><a href="https://cran.r-project.org/web/packages/cowplot">https://cran.r-project.org/web/packages/cowplot</a></li>
</ul>
<p>ggplotを学術論文向けにカスタマイズしやすくする。
主な利用目的はgridExtraと同じでggplotを並べる機能。
論文figureのようなA, B, Cラベルをオプションで簡単に付けられるのが良い。</p>
<dl>
<dt><code>cowplot::plot_grid()</code></dt>
<dd><code>facet_wrap()</code>のように、ざっと並べるのに便利。
もちろん入れ子も可能。
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">cowplot</span><span class="o">::</span><span class="nf">plot_grid</span><span class="p">(</span><span class="kc">...</span><span class="p">,</span> <span class="n">plotlist</span> <span class="o">=</span> <span class="kc">NULL</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">align</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;none&#34;</span><span class="p">,</span> <span class="s">&#34;h&#34;</span><span class="p">,</span> <span class="s">&#34;v&#34;</span><span class="p">,</span> <span class="s">&#34;hv&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="n">nrow</span> <span class="o">=</span> <span class="kc">NULL</span><span class="p">,</span> <span class="n">ncol</span> <span class="o">=</span> <span class="kc">NULL</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">scale</span> <span class="o">=</span> <span class="m">1</span><span class="p">,</span> <span class="n">rel_widths</span> <span class="o">=</span> <span class="m">1</span><span class="p">,</span> <span class="n">rel_heights</span> <span class="o">=</span> <span class="m">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">labels</span> <span class="o">=</span> <span class="kc">NULL</span><span class="p">,</span> <span class="n">label_size</span> <span class="o">=</span> <span class="m">14</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">hjust</span> <span class="o">=</span> <span class="m">-0.5</span><span class="p">,</span> <span class="n">vjust</span> <span class="o">=</span> <span class="m">1.5</span><span class="p">)</span>
</span></span></code></pre></div><p>さらに細やかな制御をしたいときは以下の関数を個別に重ねていく。</p>
</dd>
<dt><code>cowplot::ggdraw(plot = NULL, xlim = c(0, 1), ylim = c(0, 1))</code></dt>
<dd>これの後ろに <code>+</code> 演算子で <code>draw_***()</code> を足していく。</dd>
<dt><code>cowplot::get_legend(plot)</code></dt>
<dd>凡例が共通する図を並べるとき、代表のやつをこれで取っておいてあとで並べる。</dd>
</dl>
<p><code>draw_figure_label()</code>
<code>draw_grob()</code>
<code>draw_label()</code>
<code>draw_line()</code>
<code>draw_plot()</code>
<code>draw_plot_label()</code>
<code>draw_text()</code></p>
<p><code>theme_cowplot()</code>
<code>ggsave2()</code></p>
<p>パッケージ読み込みと同時に勝手にテーマを変更したり、
<code>ggsave()</code> 関数を上書きしたりという問題が過去にはあったが、今は大丈夫。</p>
<p>できあがった図を並べるための新しいパッケージとして
<a href="https://github.com/thomasp85/patchwork">patchwork</a>
がすごくエレガントで期待大。
ただし、演算子を多用するスタイルは忘れやすく検索しにくい諸刃の剣。</p>

</article>
</main>

<nav class="side-bar">
<div class="menu">

<div><a href="/about.html">About</a></div>

<div><a href="/research.html">Research Interests</a></div>

<input type="checkbox" id="menu-rstats" checked>
<label for="menu-rstats" class="active">R stats</label>
<ul>
<li><a href="/rstats/intro.html">R自学自習の基礎知識</a></li>
<li><a href="/rstats/programming.html">RプログラミングTips</a></li>
<li><a href="/rstats/config.html">R環境設定</a></li>
<li class="active"><a href="/rstats/ggplot2.html">ggplot2</a></li>
<li><a href="/rstats/dplyr.html">dplyr</a></li>
<li><a href="/rstats/tidyr.html">tidyr</a></li>
<li><a href="/rstats/purrr.html">purrr</a></li>
<li><a href="/rstats/readr.html">readr</a></li>
<li><a href="/rstats/stringr.html">stringr</a></li>
<li><a href="/rstats/knitr.html">knitr</a></li>
<li><a href="/rstats/parallel.html">parallel</a></li>
<li><a href="/rstats/devtools.html">devtools</a></li>
<li><a href="/rstats/rcpp.html">Rcpp</a></li>
<li><a href="/rstats/bioconductor.html">Bioconductor</a></li>
<li><a href="/rstats/genomicranges.html">GenomicRanges</a></li>
<li><a href="/rstats/rtracklayer.html">rtracklayer</a></li>
<li><a href="/rstats/biomart.html">biomaRt</a></li>
<li><a href="/rstats/edger.html">edgeR</a></li>
<li><a href="/rstats/topgo.html">topGO</a></li>
<li><a href="/rstats/rgl.html">rgl</a></li>
<li><a href="/rstats/stan.html">Stan</a></li>
</ul>

<input type="checkbox" id="menu-python">
<label for="menu-python">Python</label>
<ul>
<li><a href="/python/install.html">Pythonインストール</a></li>
<li><a href="/python/pip.html">pip</a></li>
<li><a href="/python/ipython.html">IPython</a></li>
<li><a href="/python/biopython.html">BioPython</a></li>
<li><a href="/python/concurrent.html">concurrent.futures</a></li>
<li><a href="/python/copy.html">copy</a></li>
<li><a href="/python/matplotlib.html">matplotlib &#43; seaborn</a></li>
<li><a href="/python/scipy.html">NumPy, SciPy</a></li>
<li><a href="/python/pandas.html">Pandas</a></li>
<li><a href="/python/packaging.html">Pythonパッケージ作成</a></li>
</ul>

<input type="checkbox" id="menu-cxx">
<label for="menu-cxx">C&#43;&#43;</label>
<ul>
<li><a href="/cxx/boost.html">Boost</a></li>
<li><a href="/cxx/getopt.html">C&#43;&#43;コマンドライン引数</a></li>
<li><a href="/cxx/speed.html">C&#43;&#43;高速化</a></li>
<li><a href="/cxx/gcc.html">gcc</a></li>
<li><a href="/cxx/bitwise.html">ビット演算</a></li>
<li><a href="/cxx/random.html">擬似乱数生成器</a></li>
</ul>

<input type="checkbox" id="menu-bio">
<label for="menu-bio">Biology</label>
<ul>
<li><a href="/bio/blast.html">BLAST</a></li>
<li><a href="/bio/dadi.html">dadi</a></li>
<li><a href="/bio/gene_ontology.html">Gene Ontology</a></li>
<li><a href="/bio/meme.html">MEME</a></li>
<li><a href="/bio/popgen.html">Population Genetics</a></li>
<li><a href="/bio/repeatmasker.html">RepeatMasker</a></li>
<li><a href="/bio/samtools.html">SAMtools</a></li>
<li><a href="/bio/shirokane.html">SHIROKANE</a></li>
<li><a href="/bio/stochastic_process.html">Stochastic Process</a></li>
<li><a href="/bio/mathmorph.html">数理形態学</a></li>
<li><a href="/bio/linear_algebra.html">線形代数</a></li>
<li><a href="/bio/complexnetwork.html">複雑ネットワーク</a></li>
<li><a href="/bio/nig.html">遺伝研スパコン</a></li>
<li><a href="/bio/motif.html">配列モチーフ探索</a></li>
</ul>

<input type="checkbox" id="menu-dev">
<label for="menu-dev">Developer Tools</label>
<ul>
<li><a href="/dev/apptainer.html">Apptainer</a></li>
<li><a href="/dev/autotools.html">autoconf, automake</a></li>
<li><a href="/dev/cmake.html">CMake</a></li>
<li><a href="/dev/docker.html">Docker</a></li>
<li><a href="/dev/emacs.html">Emacs</a></li>
<li><a href="/dev/git.html">Git</a></li>
<li><a href="/dev/make.html">make</a></li>
<li><a href="/dev/mount.html">mount</a></li>
<li><a href="/dev/rsync.html">rsync</a></li>
<li><a href="/dev/ssh.html">ssh</a></li>
<li><a href="/dev/tmux.html">tmux</a></li>
<li><a href="/dev/torque.html">TORQUE</a></li>
<li><a href="/dev/vi.html">vi</a></li>
<li><a href="/dev/vscode.html">VSCode</a></li>
<li><a href="/dev/zsh.html">zsh</a></li>
<li><a href="/dev/sh.html">シェルスクリプト</a></li>
<li><a href="/dev/nohup.html">プロセス管理</a></li>
<li><a href="/dev/devenv.html">開発環境</a></li>
</ul>

<input type="checkbox" id="menu-mac">
<label for="menu-mac">Mac</label>
<ul>
<li><a href="/mac/applescript.html">AppleScript</a></li>
<li><a href="/mac/homebrew.html">Homebrew</a></li>
<li><a href="/mac/keyboard.html">Keyboard</a></li>
<li><a href="/mac/command.html">Mac固有コマンド</a></li>
<li><a href="/mac/quicklook.html">QuickLook</a></li>
<li><a href="/mac/winebottler.html">WineBottler</a></li>
</ul>

<input type="checkbox" id="menu-lectures">
<label for="menu-lectures">Lectures</label>
<ul>
<li><a href="/lectures/verhoef_comm_ecol-11.html">Community Ecology 輪読会 11章</a></li>
<li><a href="/lectures/git2018nrifs.html">Git入門2018</a></li>
<li><a href="/lectures/git2019makino.html">Git入門2019</a></li>
<li><a href="/lectures/prml-11-1.html">PRML輪読会 11章1節</a></li>
<li><a href="/lectures/prml-2-1.html">PRML輪読会 2章前半</a></li>
<li><a href="/lectures/prml-3-4.html">PRML輪読会 3章4節</a></li>
<li><a href="/lectures/wakeley-2-2.html">Wakeley輪読会 2章2節</a></li>
</ul>

<input type="checkbox" id="menu-misc">
<label for="menu-misc">Miscellaneous</label>
<ul>
<li><a href="/misc/fonts.html">Fonts</a></li>
<li><a href="/misc/gollum.html">Gollum</a></li>
<li><a href="/misc/hugo.html">Hugo</a></li>
<li><a href="/misc/latex.html">LaTeX</a></li>
</ul>

<div><a href="/tags.html">Tags</a></div>
</div>
<search><form action="/search.html">
<input type="search" name="q" placeholder="search">
</form></search>
</nav>
<footer><small>(ɔ) 2008 岩嵜航 Watal M. Iwasaki</small></footer>
</body>
</html>
